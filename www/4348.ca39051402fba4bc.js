"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4348],{4348:(j,h,o)=>{o.r(h),o.d(h,{SurveyeditPageModule:()=>l});var f=o(6895),g=o(433),r=o(5035),b=o(4126),d=o(655),e=o(8256),m=o(1053);function v(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",6)(2,"ion-item",7)(3,"ion-label",8),e._uU(4,"Image "),e.qZA(),e.TgZ(5,"ion-input",19),e.NdJ("ngModelChange",function(u){e.CHM(i);const p=e.oxw();return e.KtG(p.image=u)}),e.qZA()()()()}if(2&n){const i=e.oxw();e.xp6(5),e.Q6J("ngModel",i.image)}}class c{constructor(t,i,s,u,p,P,w,O){Object.defineProperty(this,"navCtrl",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"popoverCtrl",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"alertController",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"route",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.defineProperty(this,"loadingController",{enumerable:!0,configurable:!0,writable:!0,value:p}),Object.defineProperty(this,"redditService",{enumerable:!0,configurable:!0,writable:!0,value:P}),Object.defineProperty(this,"router",{enumerable:!0,configurable:!0,writable:!0,value:w}),Object.defineProperty(this,"toastCtrl",{enumerable:!0,configurable:!0,writable:!0,value:O}),Object.defineProperty(this,"posts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"title",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"price",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"table",{enumerable:!0,configurable:!0,writable:!0,value:"surveys"}),Object.defineProperty(this,"file",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"gallery",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"idgallery",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"editurl",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:{placeholder:"Votre description ici...",tabsize:2,height:200,uploadImagePath:"/api/upload",dialogsInBody:!0,toolbar:[["misc",["codeview","undo","redo"]],["style",["bold","italic","underline","clear"]],["font",["bold","italic","underline","strikethrough","superscript","subscript","clear"]],["fontsize",["fontname","fontsize","color"]],["para",["style","ul","ol","paragraph","height"]],["insert",["link","picture"]]],fontNames:["Helvetica","Arial","Arial Black","Comic Sans MS","Courier New","Times"]}}),Object.defineProperty(this,"editorValue",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"UrlBase",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"UrlImage",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"subtitle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"category",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ngOnInit(){this.route.params.subscribe(t=>{this.id=t.id,this.getdata(),this.UrlImage=this.redditService.getUrlImage()})}getdata(){return(0,d.mG)(this,void 0,void 0,function*(){this.redditService.getByid(this.table,this.id).subscribe(t=>{this.posts=[t],this.title=this.posts[0].title,this.subtitle=this.posts[0].subtitle,this.content=this.posts[0].content,this.url=this.posts[0].url,this.image=this.posts[0].image,this.price=this.posts[0].price,this.view=this.posts[0].view,this.category=this.posts[0].category,this.order=this.posts[0].order})})}doSave(){return(0,d.mG)(this,void 0,void 0,function*(){this.url=encodeURI(this.title);var t={id:this.id,title:this.title,content:this.content,price:this.price,url:this.url,image:this.image,view:this.view,order:this.order};console.log(t),this.redditService.update(this.table,this.id,t).toPromise().then(i=>{setTimeout(()=>{this.router.navigateByUrl("/surveys")},600)})})}editurlseo(){return(0,d.mG)(this,void 0,void 0,function*(){this.editurl=!this.editurl})}onFileChange(t){this.file=t.target.files[0],console.log(this.file),this.submitForm()}submitForm(){return(0,d.mG)(this,void 0,void 0,function*(){let t=new FormData;t.append("image",this.file,this.file.name),t.append("title","Image "),console.log(t),this.redditService.uploadFormData(t).toPromise().then(i=>{this.image=i,setTimeout(()=>{},500)})})}doCancel(){return(0,d.mG)(this,void 0,void 0,function*(){this.router.navigateByUrl("/surveys")})}}Object.defineProperty(c,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return new(t||c)(e.Y36(r.SH),e.Y36(r.Dh),e.Y36(r.Br),e.Y36(b.gz),e.Y36(r.HT),e.Y36(m.I),e.Y36(b.F0),e.Y36(r.yF))}}),Object.defineProperty(c,"\u0275cmp",{enumerable:!0,configurable:!0,writable:!0,value:e.Xpm({type:c,selectors:[["app-surveyedit"]],decls:39,vars:5,consts:[["color","secondary"],["slot","start"],["responsive-sm","",1,"ion-padding"],["sizeLg","8","sizeMd","8","sizeXs","12"],["lines","none"],["sizeLg","6","sizeMd","6","sizeXs","12"],["sizeLg","12","sizeMd","12","sizeXs","12"],[1,"roundedInput"],["position","stacked"],["inputmode","text","placeholder","Titre",3,"ngModel","ngModelChange"],["slot","icon-only","name","attach"],["type","file",3,"change"],[2,"width","200px",3,"src"],["sizeLg","4","sizeMd","4","sizeXs","12"],[4,"ngIf"],["slot","end",1,"item-note"],["color","light","size","medium",3,"click"],["color","secondary","size","medium",3,"click"],["sizeLg","4","sizeMd","4","sizeXs","12",1,"padding"],["inputmode","text","placeholder","",3,"ngModel","ngModelChange"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Post "),e.qZA()()(),e.TgZ(6,"ion-content",2)(7,"ion-row")(8,"ion-col",3)(9,"ion-list",4)(10,"ion-row")(11,"ion-col",5),e._uU(12),e._UZ(13,"br"),e.qZA()(),e.TgZ(14,"ion-row")(15,"ion-col",6)(16,"ion-item",7)(17,"ion-label",8),e._uU(18,"Titre"),e.qZA(),e.TgZ(19,"ion-input",9),e.NdJ("ngModelChange",function(u){return i.title=u}),e.qZA()()()(),e.TgZ(20,"ion-row")(21,"ion-col",3)(22,"h4"),e._uU(23," Ajouter une image "),e.qZA(),e.TgZ(24,"ion-item")(25,"ion-buttons",1)(26,"ion-button"),e._UZ(27,"ion-icon",10),e.qZA()(),e.TgZ(28,"input",11),e.NdJ("change",function(u){return i.onFileChange(u)}),e.qZA()(),e._UZ(29,"img",12),e.qZA(),e._UZ(30,"ion-col",13),e.qZA(),e.YNc(31,v,6,1,"ion-row",14),e.TgZ(32,"ion-item")(33,"div",15)(34,"ion-button",16),e.NdJ("click",function(){return i.doCancel()}),e._uU(35,"Annuler "),e.qZA(),e.TgZ(36,"ion-button",17),e.NdJ("click",function(){return i.doSave()}),e._uU(37,"Enregistrer"),e.qZA()()()()(),e._UZ(38,"ion-col",18),e.qZA()()),2&t&&(e.xp6(12),e.hij(" Id: ",i.id," "),e.xp6(7),e.Q6J("ngModel",i.title),e.xp6(10),e.hYB("src","",i.UrlImage,"images/",i.image,"",e.LSH),e.xp6(2),e.Q6J("ngIf","page"==i.category))},dependencies:[f.O5,g.JJ,g.On,r.oU,r.YG,r.Sm,r.wI,r.W2,r.Gu,r.gu,r.pK,r.Ie,r.Q$,r.q_,r.Nd,r.wd,r.sr,r.j9,r.cs],styles:[".divider-blue[_ngcontent-%COMP%]{height:100px;border-radius:10px;background-color:#737474;padding-top:20px;text-align:center}.list-md[_ngcontent-%COMP%]{padding-top:20px;border-radius:10px;box-shadow:1px 1px 1px 2px #d7d7d7}h2[_ngcontent-%COMP%]{color:#fff}ion-list[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .roundedInput[_ngcontent-%COMP%]{--border-color: gray;--border-radius: 5px;--border-width: 2px;--box-shadow: 2px gray;--highlight-height: 0;--background: #f8f9fa;padding-right:10px}ion-textarea.custom-textarea[_ngcontent-%COMP%]{--background: #373737;--color: #fff;--padding-end: 10px;--padding-start: 10px;--placeholder-color: #ddd;--placeholder-opacity: .8}ion-modal[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{height:90%}.note-modal-backdrop[_ngcontent-%COMP%]{display:none!important}.note-dialog[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{z-index:1050}"]})});const y=[{path:"",component:c}];class a{}Object.defineProperty(a,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return new(t||a)}}),Object.defineProperty(a,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:a})}),Object.defineProperty(a,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[b.Bz.forChild(y),b.Bz]})});class l{}Object.defineProperty(l,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return new(t||l)}}),Object.defineProperty(l,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:l})}),Object.defineProperty(l,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[f.ez,g.u5,r.Pc,a]})})}}]);