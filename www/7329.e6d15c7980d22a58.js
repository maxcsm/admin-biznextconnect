"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7329],{266:(U,_,u)=>{u.r(_),u.d(_,{CategoriesPageModule:()=>d});var h=u(6895),l=u(433),i=u(5035),f=u(4126),g=u(655),e=u(8256),v=u(1053),y=u(7330);function C(n,t){if(1&n&&e._UZ(0,"img",23),2&n){const r=e.oxw().$implicit,a=e.oxw();e.hYB("src","",a.UrlImage,"home/",r.image,"",e.LSH)}}function P(n,t){if(1&n){const r=e.EpF();e.TgZ(0,"ion-item",16)(1,"ion-thumbnail",17),e.NdJ("click",function(o){const s=e.CHM(r).$implicit,c=e.oxw();return e.KtG(c.edit(o,s))}),e.YNc(2,C,1,2,"img",18),e.qZA(),e._UZ(3,"ion-icon",19),e.TgZ(4,"ion-label",20),e.NdJ("click",function(o){const s=e.CHM(r).$implicit,c=e.oxw();return e.KtG(c.edit(o,s))}),e._uU(5),e.qZA(),e.TgZ(6,"ion-button",21),e.NdJ("click",function(o){const s=e.CHM(r).$implicit,c=e.oxw();return e.KtG(c.delete(o,s))}),e._UZ(7,"ion-icon",22),e.qZA()()}if(2&n){const r=t.$implicit;e.xp6(2),e.Q6J("ngIf",r.image),e.xp6(3),e.hij(" ",r.tag_fr," ")}}function w(n,t){if(1&n){const r=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar"),e._UZ(2,"ion-buttons",1),e.TgZ(3,"ion-title"),e._uU(4," Ajouter "),e.qZA(),e.TgZ(5,"ion-buttons",24)(6,"ion-button",20),e.NdJ("click",function(){e.CHM(r);const o=e.oxw();return e.KtG(o.modal.dismiss())}),e._uU(7," Annuler "),e.qZA()()()(),e.TgZ(8,"ion-content",25)(9,"form",26),e.NdJ("ngSubmit",function(){e.CHM(r);const o=e.oxw();return e.KtG(o.doSave())}),e.TgZ(10,"ion-item")(11,"ion-label",27),e._UZ(12,"ion-icon",28),e._uU(13," Cat\xe9gorie * "),e.qZA(),e.TgZ(14,"ion-input",29),e.NdJ("ngModelChange",function(o){e.CHM(r);const p=e.oxw();return e.KtG(p.title=o)}),e.qZA()()(),e.TgZ(15,"ion-button",30),e.NdJ("click",function(){e.CHM(r);const o=e.oxw();return e.KtG(o.doSave())}),e._uU(16,"Enregister"),e.qZA()()}if(2&n){const r=e.oxw();e.xp6(9),e.Q6J("formGroup",r.validations_form),e.xp6(5),e.Q6J("ngModel",r.title),e.xp6(1),e.Q6J("disabled",!r.validations_form.value)}}class m{constructor(t,r,a,o,p,s,c,O,Z,T,x){Object.defineProperty(this,"navCtrl",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"formBuilder",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"popoverCtrl",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"alertController",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"menu",{enumerable:!0,configurable:!0,writable:!0,value:p}),Object.defineProperty(this,"loadingController",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"redditService",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"router",{enumerable:!0,configurable:!0,writable:!0,value:O}),Object.defineProperty(this,"toastCtrl",{enumerable:!0,configurable:!0,writable:!0,value:Z}),Object.defineProperty(this,"loadingCtrl",{enumerable:!0,configurable:!0,writable:!0,value:T}),Object.defineProperty(this,"localStore",{enumerable:!0,configurable:!0,writable:!0,value:x}),Object.defineProperty(this,"modal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"table",{enumerable:!0,configurable:!0,writable:!0,value:"tags"}),Object.defineProperty(this,"category",{enumerable:!0,configurable:!0,writable:!0,value:"post"}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"posts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"wordid",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"total",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"last_page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"per_page",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"order_id",{enumerable:!0,configurable:!0,writable:!0,value:"id"}),Object.defineProperty(this,"order_by",{enumerable:!0,configurable:!0,writable:!0,value:"desc"}),Object.defineProperty(this,"currentpage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formgroup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validations_form",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"title",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"UrlImage",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"iduser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validation_messages",{enumerable:!0,configurable:!0,writable:!0,value:{title:[{type:"required",message:"Titre requis."},{type:"minlength",message:"3 caract\xe8res minimum."},{type:"maxlength",message:"100 caract\xe8res maximum."}]}}),this.page=1}ngOnInit(){this.UrlImage=this.redditService.getUrlImage(),this.iduser=this.localStore.getItem("iduser"),this.validations_form=this.formBuilder.group({title:new l.NI("",l.kI.compose([l.kI.maxLength(100),l.kI.minLength(3),l.kI.required]))})}ionViewWillEnter(){this.getData()}getData(){return(0,g.mG)(this,void 0,void 0,function*(){this.redditService.getDataAll("public_tags").subscribe(t=>{this.posts=t.data})})}next(t){this.currentpage<this.last_page&&(this.page=this.page+1,this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(r=>{let a=r.data;for(let o of a)this.posts.push(o);this.total=r.total,this.per_page=r.per_page,this.currentpage=r.current_page,this.last_page=r.last_page})),t.target.complete()}doInfinite(t){return(0,g.mG)(this,void 0,void 0,function*(){this.next(t)})}handleChange(t){const r=t.target.value.toLowerCase();this.filter=r,this.filter=t.target.value,this.page=1,setTimeout(()=>{this.getDataFilter()},1e3)}getDataFilter(){return(0,g.mG)(this,void 0,void 0,function*(){this.page=1,this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(t=>{this.posts=t.data,this.total=t.total,this.per_page=t.per_page,this.currentpage=t.current_page,this.last_page=t.last_page})})}onChangeWord(t){return(0,g.mG)(this,void 0,void 0,function*(){this.filter=t.target.value,this.page=1,setTimeout(()=>{this.getDataFilter()},1e3)})}onCancelword(t){}reset(){this.filter="",this.page=1,this.per_page=20,this.getData()}cancel(){this.modal.dismiss(null,"cancel")}onWillDismiss(t){}doSave(){var t=JSON.stringify({tag_fr:this.title,type:1,isChecked:0,image:"logo.jpg"});this.redditService.addPost(this.table,t).subscribe(r=>{this.modal.dismiss(),this.getData(),setTimeout(()=>{this.router.navigateByUrl("/categories"),this.title=""},400)})}prev(){this.page>1&&(this.page=this.page-1,this.getData())}forward(){this.currentpage<this.last_page&&(this.page=this.last_page,this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(t=>{console.log(t),this.posts=t.data,this.total=t.total,this.per_page=t.per_page,this.currentpage=t.current_page,this.last_page=t.last_page}))}backward(){this.currentpage>1&&(this.page=1,this.getData())}delete(t,r){return(0,g.mG)(this,void 0,void 0,function*(){this.id=r.id,yield(yield this.alertController.create({header:"Supprimer",message:"Voulez-vous vraiment ? ",buttons:[{text:"Annuler",role:"cancel",cssClass:"secondary",handler:o=>{}},{text:"Oui",handler:()=>{this.redditService.delete(this.table,this.id).toPromise().then(o=>{setTimeout(()=>{this.getData()},400)})}}]})).present()})}edit(t,r){return(0,g.mG)(this,void 0,void 0,function*(){this.router.navigateByUrl("/category-detail/"+r.id)})}}Object.defineProperty(m,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return new(t||m)(e.Y36(i.SH),e.Y36(l.qu),e.Y36(i.Dh),e.Y36(i.Br),e.Y36(i._q),e.Y36(i.HT),e.Y36(v.I),e.Y36(f.F0),e.Y36(i.yF),e.Y36(i.HT),e.Y36(y.C))}}),Object.defineProperty(m,"\u0275cmp",{enumerable:!0,configurable:!0,writable:!0,value:e.Xpm({type:m,selectors:[["app-categories"]],viewQuery:function(t,r){if(1&t&&e.Gf(i.ki,5),2&t){let a;e.iGM(a=e.CRH())&&(r.modal=a.first)}},decls:28,vars:3,consts:[["color","secondary"],["slot","start"],["slot","end"],["id","open-modal-new-category"],["name","add-circle"],[2,"display","none"],["size-xl","8","size-md","6","size-xs","12"],["type","text","placeholder","Rechercher...","debounce","200",3,"ngModel","ngModelChange","ionChange"],["size-xl","4","size-md","6","size-xs","12",2,"padding-top","12px"],["color","light",3,"click"],["name","refresh-outline"],["color","light"],["button","",4,"ngFor","ngForOf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Chargement..."],["trigger","open-modal-new-category",3,"willDismiss"],["button",""],["slot","start",3,"click"],[3,"src",4,"ngIf"],["name","pricetag","color","secondary"],[3,"click"],["ion-button","","outline","","item-end","","small","","color","light",3,"click"],["name","trash-outline"],[3,"src"],["slot","end","color","primary"],[1,"ion-padding"],["novalidate","",1,"list-form",3,"formGroup","ngSubmit"],["position","floating"],["name","person","item-start",""],["type","text","formControlName","title",3,"ngModel","ngModelChange"],["expand","block","color","secondary",3,"disabled","click"]],template:function(t,r){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Cat\xe9gories "),e.qZA(),e.TgZ(6,"ion-buttons",2)(7,"ion-button",3),e._UZ(8,"ion-icon",4),e._uU(9," Ajouter "),e.qZA()()()(),e.TgZ(10,"ion-content")(11,"ion-grid")(12,"ion-row",5)(13,"ion-col",6)(14,"ion-searchbar",7),e.NdJ("ngModelChange",function(o){return r.filter=o})("ionChange",function(o){return r.handleChange(o)}),e.qZA()(),e.TgZ(15,"ion-col",8)(16,"ion-button",9),e.NdJ("click",function(){return r.reset()}),e._UZ(17,"ion-icon",10),e.qZA(),e.TgZ(18,"ion-button",11),e._uU(19," Nombre de r\xe9sultats : "),e.TgZ(20,"b"),e._uU(21),e.qZA()()()()(),e.TgZ(22,"ion-list"),e.YNc(23,P,8,2,"ion-item",12),e.qZA(),e.TgZ(24,"ion-infinite-scroll",13),e.NdJ("ionInfinite",function(o){return r.doInfinite(o)}),e._UZ(25,"ion-infinite-scroll-content",14),e.qZA()(),e.TgZ(26,"ion-modal",15),e.NdJ("willDismiss",function(o){return r.onWillDismiss(o)}),e.YNc(27,w,17,3,"ng-template"),e.qZA()),2&t&&(e.xp6(14),e.Q6J("ngModel",r.filter),e.xp6(7),e.Oqu(r.total),e.xp6(2),e.Q6J("ngForOf",r.posts))},dependencies:[h.sg,h.O5,l._Y,l.JJ,l.JL,l.On,l.sg,l.u,i.YG,i.Sm,i.wI,i.W2,i.jY,i.Gu,i.gu,i.ju,i.MB,i.pK,i.Ie,i.Q$,i.q_,i.fG,i.Nd,i.VI,i.Bs,i.wd,i.sr,i.ki,i.j9]})});const j=[{path:"",component:m}];class b{}Object.defineProperty(b,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return new(t||b)}}),Object.defineProperty(b,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:b})}),Object.defineProperty(b,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[f.Bz.forChild(j),f.Bz]})});class d{}Object.defineProperty(d,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return new(t||d)}}),Object.defineProperty(d,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:d})}),Object.defineProperty(d,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[h.ez,l.u5,l.UX,i.Pc,b]})})}}]);