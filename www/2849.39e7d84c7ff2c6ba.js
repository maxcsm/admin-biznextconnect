"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2849],{2849:(M,f,c)=>{c.r(f),c.d(f,{PostsPageModule:()=>p});var m=c(6895),a=c(433),n=c(5035),_=c(4126),d=c(655),e=c(8256),v=c(1053),P=c(7330);function y(l,i){1&l&&(e.TgZ(0,"ion-badge",19),e._uU(1," Publi\xe9 "),e.qZA())}function w(l,i){1&l&&(e.TgZ(0,"ion-badge",24),e._uU(1," Brouillion "),e.qZA())}function x(l,i){if(1&l){const t=e.EpF();e.TgZ(0,"ion-item",16)(1,"ion-label",17),e.NdJ("click",function(r){const s=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.edit(r,s))}),e.TgZ(2,"ion-text")(3,"small"),e._uU(4),e.qZA(),e.TgZ(5,"h2")(6,"b"),e._uU(7),e.qZA()()()(),e.TgZ(8,"ion-label",18),e.NdJ("click",function(r){const s=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.edit(r,s))}),e.TgZ(9,"ion-text")(10,"h2"),e._uU(11),e.qZA()()(),e.TgZ(12,"ion-label",18),e.NdJ("click",function(r){const s=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.edit(r,s))}),e.TgZ(13,"ion-badge",19),e._uU(14),e.qZA()(),e.TgZ(15,"ion-label",18),e.NdJ("click",function(r){const s=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.edit(r,s))}),e.YNc(16,y,2,0,"ion-badge",20),e.YNc(17,w,2,0,"ion-badge",21),e.qZA(),e.TgZ(18,"ion-button",22),e.NdJ("click",function(r){const s=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.delete(r,s))}),e._UZ(19,"ion-icon",23),e.qZA()()}if(2&l){const t=i.$implicit;e.xp6(4),e.hij(" ID ",t.id,""),e.xp6(3),e.hij(" ",t.title," "),e.xp6(4),e.hij("",t.email," "),e.xp6(3),e.hij(" ",t.category," "),e.xp6(2),e.Q6J("ngIf",1==t.view),e.xp6(1),e.Q6J("ngIf",0==t.view)}}function Z(l,i){if(1&l){const t=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar"),e._UZ(2,"ion-buttons",1),e.TgZ(3,"ion-title"),e._uU(4," Ajouter "),e.qZA(),e.TgZ(5,"ion-buttons",25)(6,"ion-button",17),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.modal.dismiss())}),e._uU(7," Annuler "),e.qZA()()()(),e.TgZ(8,"ion-content",26)(9,"form",27),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.doSave())}),e.TgZ(10,"ion-item",28)(11,"ion-label",29),e._UZ(12,"ion-icon",30),e._uU(13," titre * "),e.qZA(),e.TgZ(14,"ion-input",31),e.NdJ("ngModelChange",function(r){e.CHM(t);const g=e.oxw();return e.KtG(g.title=r)}),e.qZA()(),e.TgZ(15,"ion-item",32)(16,"ion-label",33),e._UZ(17,"ion-icon",34),e._uU(18," description * "),e.qZA(),e.TgZ(19,"ion-textarea",35),e.NdJ("ngModelChange",function(r){e.CHM(t);const g=e.oxw();return e.KtG(g.content=r)}),e.qZA()()(),e.TgZ(20,"ion-button",36),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.doSave())}),e._uU(21,"Enregister"),e.qZA()()}if(2&l){const t=e.oxw();e.xp6(9),e.Q6J("formGroup",t.validations_form),e.xp6(5),e.Q6J("ngModel",t.title),e.xp6(5),e.Q6J("autoGrow",!0)("ngModel",t.content),e.xp6(1),e.Q6J("disabled",!t.validations_form.value)}}class h{constructor(i,t,o,r,g,s,u,j,C,O,A){Object.defineProperty(this,"navCtrl",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"formBuilder",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"popoverCtrl",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"alertController",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"menu",{enumerable:!0,configurable:!0,writable:!0,value:g}),Object.defineProperty(this,"loadingController",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"redditService",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.defineProperty(this,"router",{enumerable:!0,configurable:!0,writable:!0,value:j}),Object.defineProperty(this,"toastCtrl",{enumerable:!0,configurable:!0,writable:!0,value:C}),Object.defineProperty(this,"loadingCtrl",{enumerable:!0,configurable:!0,writable:!0,value:O}),Object.defineProperty(this,"localStore",{enumerable:!0,configurable:!0,writable:!0,value:A}),Object.defineProperty(this,"modal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"table",{enumerable:!0,configurable:!0,writable:!0,value:"posts"}),Object.defineProperty(this,"category",{enumerable:!0,configurable:!0,writable:!0,value:"news"}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"posts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"wordid",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"total",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"last_page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"per_page",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"order_id",{enumerable:!0,configurable:!0,writable:!0,value:"id"}),Object.defineProperty(this,"order_by",{enumerable:!0,configurable:!0,writable:!0,value:"desc"}),Object.defineProperty(this,"currentpage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formgroup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validations_form",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"title",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"UrlImage",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"iduser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validation_form",{enumerable:!0,configurable:!0,writable:!0,value:{title:[{type:"required",message:"Titre requis."},{type:"minlength",message:"3 caract\xe8res minimum."},{type:"maxlength",message:"100 caract\xe8res maximum."}],content:[{type:"required",message:"Description requise."},{type:"minlength",message:"3 caract\xe8res minimum."},{type:"maxlength",message:"100 caract\xe8res maximum."}]}}),this.page=1}ngOnInit(){this.UrlImage=this.redditService.getUrlImage(),this.iduser=this.localStore.getItem("iduser"),this.validations_form=this.formBuilder.group({title:new a.NI("",a.kI.compose([a.kI.maxLength(100),a.kI.minLength(3),a.kI.required])),content:new a.NI("",a.kI.compose([a.kI.maxLength(100),a.kI.minLength(3),a.kI.required]))})}ionViewWillEnter(){this.getData()}getData(){return(0,d.mG)(this,void 0,void 0,function*(){const i=yield this.loadingCtrl.create({message:"Chargement..",spinner:"bubbles"});yield i.present(),this.page=1,this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(t=>{i.dismiss(),this.posts=t.data,this.total=t.total,this.per_page=t.per_page,this.currentpage=t.current_page,this.last_page=t.last_page})})}next(i){this.currentpage<this.last_page&&(this.page=this.page+1,this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(t=>{let o=t.data;for(let r of o)this.posts.push(r);this.total=t.total,this.per_page=t.per_page,this.currentpage=t.current_page,this.last_page=t.last_page})),i.target.complete()}doInfinite(i){return(0,d.mG)(this,void 0,void 0,function*(){this.next(i)})}handleChange(i){const t=i.target.value.toLowerCase();this.filter=t,this.filter=i.target.value,this.page=1,setTimeout(()=>{this.getDataFilter()},1e3)}getDataFilter(){return(0,d.mG)(this,void 0,void 0,function*(){this.page=1,this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(i=>{this.posts=i.data,this.total=i.total,this.per_page=i.per_page,this.currentpage=i.current_page,this.last_page=i.last_page})})}onChangeWord(i){return(0,d.mG)(this,void 0,void 0,function*(){this.filter=i.target.value,this.page=1,setTimeout(()=>{this.getDataFilter()},1e3)})}onCancelword(i){}reset(){this.filter="",this.page=1,this.per_page=20,this.getData()}cancel(){this.modal.dismiss(null,"cancel")}onWillDismiss(i){}doSave(){var i=JSON.stringify({title:this.title,content:this.content,category:"news",edited_by:this.iduser,view:1});this.redditService.addPost(this.table,i).subscribe(t=>{this.modal.dismiss(),this.getData(),setTimeout(()=>{this.router.navigateByUrl("/posts"),this.title=""},400)})}prev(){this.page>1&&(this.page=this.page-1,this.getData())}forward(){this.currentpage<this.last_page&&(this.page=this.last_page,this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(i=>{this.posts=i.data,this.total=i.total,this.per_page=i.per_page,this.currentpage=i.current_page,this.last_page=i.last_page}))}backward(){this.currentpage>1&&(this.page=1,this.getData())}edit(i,t){return(0,d.mG)(this,void 0,void 0,function*(){this.router.navigateByUrl("/post/"+t.id)})}delete(i,t){return(0,d.mG)(this,void 0,void 0,function*(){this.id=t.id,yield(yield this.alertController.create({header:"Supprimer",message:"Voulez-vous vraiment ? ",buttons:[{text:"Annuler",role:"cancel",cssClass:"secondary",handler:r=>{}},{text:"Oui",handler:()=>{this.redditService.delete(this.table,this.id).toPromise().then(r=>{setTimeout(()=>{this.getData()},400)})}}]})).present()})}}Object.defineProperty(h,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return new(i||h)(e.Y36(n.SH),e.Y36(a.qu),e.Y36(n.Dh),e.Y36(n.Br),e.Y36(n._q),e.Y36(n.HT),e.Y36(v.I),e.Y36(_.F0),e.Y36(n.yF),e.Y36(n.HT),e.Y36(P.C))}}),Object.defineProperty(h,"\u0275cmp",{enumerable:!0,configurable:!0,writable:!0,value:e.Xpm({type:h,selectors:[["app-posts"]],viewQuery:function(i,t){if(1&i&&e.Gf(n.ki,5),2&i){let o;e.iGM(o=e.CRH())&&(t.modal=o.first)}},decls:28,vars:3,consts:[["color","secondary"],["slot","start"],["slot","end"],["id","open-modal-new"],["name","add-circle"],[2,"background-color","#E4E4E4","border-radius","10px"],["size-xl","8","size-md","6","size-xs","12"],["type","text","placeholder","Rechercher...","debounce","200",3,"ngModel","ngModelChange","ionChange"],["size-xl","4","size-md","6","size-xs","12",2,"padding-top","12px"],["color","light",3,"click"],["name","refresh-outline"],["color","light"],["button","",4,"ngFor","ngForOf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Chargement..."],["trigger","open-modal-new",3,"willDismiss"],["button",""],[3,"click"],[1,"ion-hide-sm-down",3,"click"],["color","success","slot","end"],["color","success","slot","end",4,"ngIf"],["color","light","slot","end",4,"ngIf"],["ion-button","","outline","","item-end","","small","","color","light",3,"click"],["name","trash-outline"],["color","light","slot","end"],["slot","end","color","primary"],[1,"ion-padding"],["novalidate","",1,"list-form",3,"formGroup","ngSubmit"],[1,"roundedInput"],["position","floating"],["name","person","item-start",""],["type","text","formControlName","title",3,"ngModel","ngModelChange"],[1,"roundedInput",2,"padding-top","30px"],["position","stacked"],["name","chatbox-ellipses","item-start",""],["placeholder","Ajoutez une description ...","formControlName","content",3,"autoGrow","ngModel","ngModelChange"],["expand","block","color","secondary",3,"disabled","click"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Actualit\xe9s "),e.qZA(),e.TgZ(6,"ion-buttons",2)(7,"ion-button",3),e._UZ(8,"ion-icon",4),e._uU(9," Ajouter "),e.qZA()()()(),e.TgZ(10,"ion-content")(11,"ion-grid")(12,"ion-row",5)(13,"ion-col",6)(14,"ion-searchbar",7),e.NdJ("ngModelChange",function(r){return t.filter=r})("ionChange",function(r){return t.handleChange(r)}),e.qZA()(),e.TgZ(15,"ion-col",8)(16,"ion-button",9),e.NdJ("click",function(){return t.reset()}),e._UZ(17,"ion-icon",10),e.qZA(),e.TgZ(18,"ion-button",11),e._uU(19," Nombre de r\xe9sultats : "),e.TgZ(20,"b"),e._uU(21),e.qZA()()()()(),e.TgZ(22,"ion-list"),e.YNc(23,x,20,6,"ion-item",12),e.qZA(),e.TgZ(24,"ion-infinite-scroll",13),e.NdJ("ionInfinite",function(r){return t.doInfinite(r)}),e._UZ(25,"ion-infinite-scroll-content",14),e.qZA()(),e.TgZ(26,"ion-modal",15),e.NdJ("willDismiss",function(r){return t.onWillDismiss(r)}),e.YNc(27,Z,22,5,"ng-template"),e.qZA()),2&i&&(e.xp6(14),e.Q6J("ngModel",t.filter),e.xp6(7),e.Oqu(t.total),e.xp6(2),e.Q6J("ngForOf",t.posts))},dependencies:[m.sg,m.O5,a._Y,a.JJ,a.JL,a.On,a.sg,a.u,n.yp,n.YG,n.Sm,n.wI,n.W2,n.jY,n.Gu,n.gu,n.ju,n.MB,n.pK,n.Ie,n.Q$,n.q_,n.fG,n.Nd,n.VI,n.yW,n.g2,n.wd,n.sr,n.ki,n.j9]})});const T=[{path:"",component:h}];class b{}Object.defineProperty(b,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return new(i||b)}}),Object.defineProperty(b,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:b})}),Object.defineProperty(b,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[_.Bz.forChild(T),_.Bz]})});class p{}Object.defineProperty(p,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return new(i||p)}}),Object.defineProperty(p,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:p})}),Object.defineProperty(p,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[m.ez,a.u5,a.UX,n.Pc,b]})})}}]);