"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6585],{6585:(T,_,a)=>{a.r(_),a.d(_,{PostPageModule:()=>g});var h=a(6895),c=a(433),o=a(5035),b=a(4126),s=a(655),e=a(8256),P=a(1053),v=a(8375);function y(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",9)(2,"ion-label",11)(3,"b"),e._uU(4,"Contenu"),e.qZA()(),e.TgZ(5,"ion-item",10)(6,"div",24),e.NdJ("ngModelChange",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.content=r)}),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngxSummernote",t.config)("ngModel",t.content)}}function w(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",9)(2,"ion-item",10)(3,"ion-label",11),e._uU(4,"Description"),e.qZA(),e.TgZ(5,"ion-textarea",25),e.NdJ("ngModelChange",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.content=r)}),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("autoGrow",!0)("ngModel",t.content)}}function Z(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",3)(2,"h4"),e._uU(3," Ajouter une image "),e.qZA(),e.TgZ(4,"ion-item")(5,"ion-buttons",1)(6,"ion-button"),e._UZ(7,"ion-icon",20),e.qZA()(),e.TgZ(8,"input",21),e.NdJ("change",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.onFileChange(r))}),e.qZA()(),e._UZ(9,"img",26),e.qZA(),e._UZ(10,"ion-col",27),e.qZA()}if(2&n){const t=e.oxw();e.xp6(9),e.hYB("src","",t.UrlImage,"images/",t.image,"",e.LSH)}}function M(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",9)(2,"ion-item",10)(3,"ion-label",11),e._uU(4,"Image "),e.qZA(),e.TgZ(5,"ion-input",28),e.NdJ("ngModelChange",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.image=r)}),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.image)}}function C(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"ion-item",29),e._UZ(1,"img",30),e.TgZ(2,"ion-button",31),e.NdJ("click",function(r){const m=e.CHM(t).$implicit,f=e.oxw();return e.KtG(f.delete(r,m))}),e._UZ(3,"ion-icon",32),e.qZA()()}if(2&n){const t=i.$implicit,l=e.oxw();e.xp6(1),e.hYB("src","",l.UrlImage,"images/",t.url,"",e.LSH)}}class p{constructor(i,t,l,r,u,m,f,O){Object.defineProperty(this,"navCtrl",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"popoverCtrl",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"alertController",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"route",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"loadingController",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.defineProperty(this,"redditService",{enumerable:!0,configurable:!0,writable:!0,value:m}),Object.defineProperty(this,"router",{enumerable:!0,configurable:!0,writable:!0,value:f}),Object.defineProperty(this,"toastCtrl",{enumerable:!0,configurable:!0,writable:!0,value:O}),Object.defineProperty(this,"posts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"title",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"price",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"table",{enumerable:!0,configurable:!0,writable:!0,value:"posts"}),Object.defineProperty(this,"file",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"gallery",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"idgallery",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"editurl",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:{placeholder:"Votre description ici...",tabsize:2,height:200,uploadImagePath:"/api/upload",dialogsInBody:!0,toolbar:[["misc",["codeview","undo","redo"]],["style",["bold","italic","underline","clear"]],["font",["bold","italic","underline","strikethrough","superscript","subscript","clear"]],["fontsize",["fontname","fontsize","color"]],["para",["style","ul","ol","paragraph","height"]],["insert",["link","picture"]]],fontNames:["Helvetica","Arial","Arial Black","Comic Sans MS","Courier New","Times"]}}),Object.defineProperty(this,"editorValue",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"UrlBase",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"UrlImage",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"subtitle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"category",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ngOnInit(){this.route.params.subscribe(i=>{this.id=i.id,this.getdata(),this.galleryByPost(),this.UrlImage=this.redditService.getUrlImage()})}getdata(){return(0,s.mG)(this,void 0,void 0,function*(){this.redditService.getByid(this.table,this.id).subscribe(i=>{this.posts=[i],this.title=this.posts[0].title,this.subtitle=this.posts[0].subtitle,this.content=this.posts[0].content,this.url=this.posts[0].url,this.image=this.posts[0].image,this.price=this.posts[0].price,this.view=this.posts[0].view,this.category=this.posts[0].category,this.order=this.posts[0].order})})}galleryByPost(){return(0,s.mG)(this,void 0,void 0,function*(){this.redditService.getByid("gallerybypost",this.id).subscribe(i=>{this.gallery=i.data})})}doSave(){return(0,s.mG)(this,void 0,void 0,function*(){this.url=encodeURI(this.title);var i={id:this.id,title:this.title,content:this.content,price:this.price,url:this.url,image:this.image,view:this.view,order:this.order};console.log(i),this.redditService.update(this.table,this.id,i).toPromise().then(t=>{"news"==this.category?setTimeout(()=>{this.router.navigateByUrl("/posts")},600):"page"==this.category&&setTimeout(()=>{this.router.navigateByUrl("/public-posts")},600)})})}editurlseo(){return(0,s.mG)(this,void 0,void 0,function*(){this.editurl=!this.editurl})}onFileChange(i){this.file=i.target.files[0],console.log(this.file),this.submitForm()}submitForm(){return(0,s.mG)(this,void 0,void 0,function*(){let i=new FormData;i.append("image",this.file,this.file.name),i.append("title","Image "),console.log(i),this.redditService.uploadFormData(i).toPromise().then(t=>{this.image=t,setTimeout(()=>{},500)})})}onFileChangeGallery(i){this.file=i.target.files[0],console.log(this.file),this.submitFormGallery()}submitFormGallery(){return(0,s.mG)(this,void 0,void 0,function*(){let i=new FormData;i.append("image",this.file,this.file.name),i.append("title","Image "),i.append("postid",this.id),this.redditService.uploadGalleryImage(i).toPromise().then(t=>{this.galleryByPost(),setTimeout(()=>{},500)})})}delete(i,t){return(0,s.mG)(this,void 0,void 0,function*(){this.idgallery=t.id,yield(yield this.alertController.create({header:"Supprimer",message:"Voulez-vous vraiment ? ",buttons:[{text:"Annuler",role:"cancel",cssClass:"secondary",handler:r=>{}},{text:"Oui",handler:()=>{this.redditService.delete("gallery",this.idgallery).toPromise().then(r=>{setTimeout(()=>{this.galleryByPost()},400)})}}]})).present()})}doCancel(){return(0,s.mG)(this,void 0,void 0,function*(){"news"==this.category?setTimeout(()=>{this.router.navigateByUrl("/posts")},600):"page"==this.category&&this.router.navigateByUrl("/public-posts")})}}Object.defineProperty(p,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return new(i||p)(e.Y36(o.SH),e.Y36(o.Dh),e.Y36(o.Br),e.Y36(b.gz),e.Y36(o.HT),e.Y36(P.I),e.Y36(b.F0),e.Y36(o.yF))}}),Object.defineProperty(p,"\u0275cmp",{enumerable:!0,configurable:!0,writable:!0,value:e.Xpm({type:p,selectors:[["app-post"]],decls:63,vars:10,consts:[["color","secondary"],["slot","start"],["responsive-sm","",1,"ion-padding"],["sizeLg","8","sizeMd","8","sizeXs","12"],["lines","none"],["sizeLg","6","sizeMd","6","sizeXs","12"],[3,"ngModel","ngModelChange"],["value","0"],["value","1"],["sizeLg","12","sizeMd","12","sizeXs","12"],[1,"roundedInput"],["position","stacked"],["inputmode","text","placeholder","Titre",3,"ngModel","ngModelChange"],[2,"display","none"],["inputmode","text","placeholder","Sous titre",3,"ngModel","ngModelChange"],["inputmode","text","placeholder","1",3,"ngModel","ngModelChange"],[4,"ngIf"],["slot","end",1,"item-note"],["color","light","size","medium",3,"click"],["color","secondary","size","medium",3,"click"],["slot","icon-only","name","attach"],["type","file",3,"change"],["style","margin-top: 10px;",4,"ngFor","ngForOf"],["sizeLg","4","sizeMd","4","sizeXs","12",1,"padding"],[3,"ngxSummernote","ngModel","ngModelChange"],["placeholder","Ajoutez une description ...",3,"autoGrow","ngModel","ngModelChange"],[2,"width","200px",3,"src"],["sizeLg","4","sizeMd","4","sizeXs","12"],["inputmode","text","placeholder","",3,"ngModel","ngModelChange"],[2,"margin-top","10px"],[3,"src"],["ion-button","","outline","","item-end","","small","","color","light",3,"click"],["name","trash-outline"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Post "),e.qZA()()(),e.TgZ(6,"ion-content",2)(7,"ion-row")(8,"ion-col",3)(9,"ion-list",4)(10,"ion-row")(11,"ion-col",5),e._uU(12),e._UZ(13,"br"),e.qZA()(),e.TgZ(14,"ion-row")(15,"ion-col",5)(16,"select",6),e.NdJ("ngModelChange",function(r){return t.view=r}),e.TgZ(17,"option",7),e._uU(18," Brouillon "),e.qZA(),e.TgZ(19,"option",8),e._uU(20," Publi\xe9 "),e.qZA()()(),e._UZ(21,"ion-col",5),e.qZA(),e.TgZ(22,"ion-row")(23,"ion-col",9)(24,"ion-item",10)(25,"ion-label",11),e._uU(26,"Titre"),e.qZA(),e.TgZ(27,"ion-input",12),e.NdJ("ngModelChange",function(r){return t.title=r}),e.qZA()()()(),e.TgZ(28,"ion-row",13)(29,"ion-col",9)(30,"ion-item",10)(31,"ion-label",11),e._uU(32,"Sous titre"),e.qZA(),e.TgZ(33,"ion-input",14),e.NdJ("ngModelChange",function(r){return t.subtitle=r}),e.qZA()()()(),e.TgZ(34,"ion-row",13)(35,"ion-col",9)(36,"ion-item",10)(37,"ion-label",11),e._uU(38,"Ordre"),e.qZA(),e.TgZ(39,"ion-input",15),e.NdJ("ngModelChange",function(r){return t.order=r}),e.qZA()()()(),e.YNc(40,y,7,2,"ion-row",16),e.YNc(41,w,6,2,"ion-row",16),e.YNc(42,Z,11,2,"ion-row",16),e.YNc(43,M,6,1,"ion-row",16),e.TgZ(44,"ion-item")(45,"div",17)(46,"ion-button",18),e.NdJ("click",function(){return t.doCancel()}),e._uU(47,"Annuler "),e.qZA(),e.TgZ(48,"ion-button",19),e.NdJ("click",function(){return t.doSave()}),e._uU(49,"Enregistrer"),e.qZA()()()(),e.TgZ(50,"ion-list",13)(51,"ion-row")(52,"ion-col",3)(53,"h4"),e._uU(54," Ajouter une image dans la gallerie"),e.qZA(),e.TgZ(55,"ion-item")(56,"ion-buttons",1)(57,"ion-button"),e._UZ(58,"ion-icon",20),e.qZA()(),e.TgZ(59,"input",21),e.NdJ("change",function(r){return t.onFileChangeGallery(r)}),e.qZA()()()(),e.TgZ(60,"ion-row"),e.YNc(61,C,4,2,"ion-item",22),e.qZA()()(),e._UZ(62,"ion-col",23),e.qZA()()),2&i&&(e.xp6(12),e.hij(" Id: ",t.id," "),e.xp6(4),e.Q6J("ngModel",t.view),e.xp6(11),e.Q6J("ngModel",t.title),e.xp6(6),e.Q6J("ngModel",t.subtitle),e.xp6(6),e.Q6J("ngModel",t.order),e.xp6(1),e.Q6J("ngIf","page"==t.category),e.xp6(1),e.Q6J("ngIf","news"==t.category),e.xp6(1),e.Q6J("ngIf","page"==t.category),e.xp6(1),e.Q6J("ngIf","page"==t.category),e.xp6(18),e.Q6J("ngForOf",t.gallery))},dependencies:[h.sg,h.O5,c.YN,c.Kr,c.EJ,c.JJ,c.On,o.oU,o.YG,o.Sm,o.wI,o.W2,o.Gu,o.gu,o.pK,o.Ie,o.Q$,o.q_,o.Nd,o.g2,o.wd,o.sr,o.j9,o.cs,v.J$],styles:[".divider-blue[_ngcontent-%COMP%]{height:100px;border-radius:10px;background-color:#737474;padding-top:20px;text-align:center}.list-md[_ngcontent-%COMP%]{padding-top:20px;border-radius:10px;box-shadow:1px 1px 1px 2px #d7d7d7}h2[_ngcontent-%COMP%]{color:#fff}ion-list[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .roundedInput[_ngcontent-%COMP%]{--border-color: gray;--border-radius: 5px;--border-width: 2px;--box-shadow: 2px gray;--highlight-height: 0;--background: #f8f9fa;padding-right:10px}ion-textarea.custom-textarea[_ngcontent-%COMP%]{--background: #373737;--color: #fff;--padding-end: 10px;--padding-start: 10px;--placeholder-color: #ddd;--placeholder-opacity: .8}ion-modal[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{height:90%}.note-modal-backdrop[_ngcontent-%COMP%]{display:none!important}.note-dialog[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{z-index:1050}"]})});const x=[{path:"",component:p}];class d{}Object.defineProperty(d,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return new(i||d)}}),Object.defineProperty(d,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:d})}),Object.defineProperty(d,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[b.Bz.forChild(x),b.Bz]})});class g{}Object.defineProperty(g,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return new(i||g)}}),Object.defineProperty(g,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:g})}),Object.defineProperty(g,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[h.ez,c.u5,o.Pc,d,v.OI]})})}}]);