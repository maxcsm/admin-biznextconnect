"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6961],{6961:(O,_,s)=>{s.r(_),s.d(_,{UsersPageModule:()=>c});var m=s(6895),a=s(433),i=s(5035),b=s(4126),p=s(655),e=s(8256),v=s(1053);const y=function(u){return{"background-color":u}};function P(u,r){if(1&u){const t=e.EpF();e.TgZ(0,"ion-item",14),e.NdJ("click",function(n){const h=e.CHM(t).$implicit,f=e.oxw();return e.KtG(f.edit(n,h))}),e.TgZ(1,"ion-avatar",15),e._UZ(2,"img",16),e.qZA(),e.TgZ(3,"ion-label")(4,"ion-text")(5,"h2"),e._uU(6),e.qZA()()(),e.TgZ(7,"ion-label",17)(8,"h3"),e._uU(9),e.qZA()(),e.TgZ(10,"ion-badge",1),e._uU(11," Admin "),e.qZA()()}if(2&u){const t=r.$implicit;e.xp6(1),e.Q6J("ngStyle",e.VKq(5,y,t.color)),e.xp6(1),e.s9C("src",t.user_avatar,e.LSH),e.xp6(4),e.AsE("",t.firstname," ",t.lastname,""),e.xp6(3),e.Oqu(t.city)}}function Z(u,r){if(1&u){const t=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar"),e._UZ(2,"ion-buttons",0),e.TgZ(3,"ion-title"),e._uU(4," Ajouter "),e.qZA(),e.TgZ(5,"ion-buttons",18)(6,"ion-button",19),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.modal.dismiss())}),e._uU(7," Annuler "),e.qZA()()()(),e.TgZ(8,"ion-content",20)(9,"form",21),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.doSave())}),e.TgZ(10,"ion-item")(11,"ion-label",22),e._UZ(12,"ion-icon",23),e._uU(13," Pr\xe9nom * "),e.qZA(),e.TgZ(14,"ion-input",24),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.firstname=n)}),e.qZA()(),e.TgZ(15,"ion-item",25)(16,"ion-label",22),e._UZ(17,"ion-icon",23),e._uU(18," Nom * "),e.qZA(),e.TgZ(19,"ion-input",26),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.lastname=n)}),e.qZA()(),e.TgZ(20,"ion-item",25)(21,"ion-label",22),e._UZ(22,"ion-icon",27),e._uU(23," Email * "),e.qZA(),e.TgZ(24,"ion-input",28),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.email=n)}),e.qZA()()(),e.TgZ(25,"ion-item")(26,"ion-label",29),e._uU(27," Adresse "),e.qZA(),e.TgZ(28,"ion-input",30),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.address=n)}),e.qZA()(),e.TgZ(29,"ion-item")(30,"ion-label",29),e._uU(31," CP "),e.qZA(),e.TgZ(32,"ion-input",31),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.cp=n)}),e.qZA()(),e.TgZ(33,"ion-item")(34,"ion-label",29),e._uU(35," Ville "),e.qZA(),e.TgZ(36,"ion-input",32),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.city=n)}),e.qZA()(),e.TgZ(37,"ion-item")(38,"ion-label",29),e._uU(39,"T\xe9l\xe9phone"),e.qZA(),e.TgZ(40,"ion-input",33),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.phone=n)}),e.qZA()(),e.TgZ(41,"p"),e._uU(42," L'utilisateur va re\xe7evoir un mot de passe provisoire."),e.qZA(),e.TgZ(43,"ion-button",34),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.doSave())}),e._uU(44,"Enregister"),e.qZA()()}if(2&u){const t=e.oxw();e.xp6(9),e.Q6J("formGroup",t.validations_form),e.xp6(5),e.Q6J("ngModel",t.firstname),e.xp6(5),e.Q6J("ngModel",t.lastname),e.xp6(5),e.Q6J("ngModel",t.email),e.xp6(4),e.Q6J("ngModel",t.address),e.xp6(4),e.Q6J("ngModel",t.cp),e.xp6(4),e.Q6J("ngModel",t.city),e.xp6(4),e.Q6J("ngModel",t.phone),e.xp6(3),e.Q6J("disabled",!t.validations_form.value)}}class d{constructor(r,t,o,n,l,h,f,x,C,T){Object.defineProperty(this,"navCtrl",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"formBuilder",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"popoverCtrl",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"alertController",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"menu",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"loadingController",{enumerable:!0,configurable:!0,writable:!0,value:h}),Object.defineProperty(this,"redditService",{enumerable:!0,configurable:!0,writable:!0,value:f}),Object.defineProperty(this,"router",{enumerable:!0,configurable:!0,writable:!0,value:x}),Object.defineProperty(this,"toastCtrl",{enumerable:!0,configurable:!0,writable:!0,value:C}),Object.defineProperty(this,"loadingCtrl",{enumerable:!0,configurable:!0,writable:!0,value:T}),Object.defineProperty(this,"modal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rolename",{enumerable:!0,configurable:!0,writable:!0,value:"Administrateur"}),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"posts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"table",{enumerable:!0,configurable:!0,writable:!0,value:"users"}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"category",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"wordid",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"total",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"last_page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"per_page",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"order_id",{enumerable:!0,configurable:!0,writable:!0,value:"id"}),Object.defineProperty(this,"order_by",{enumerable:!0,configurable:!0,writable:!0,value:"desc"}),Object.defineProperty(this,"email_verified_at",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentpage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"email",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"address",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"city",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"phone",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstname",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastname",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formgroup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validations_form",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validation_messages",{enumerable:!0,configurable:!0,writable:!0,value:{firstname:[{type:"required",message:"Pr\xe9nom requis."},{type:"minlength",message:"3 caract\xe8res minimum."},{type:"maxlength",message:"25 caract\xe8res maximum."}],lastname:[{type:"required",message:"Nom requis."},{type:"minlength",message:"3 caract\xe8res minimum."},{type:"maxlength",message:"25 caract\xe8res maximum."}],email:[{type:"required",message:"Email requis."},{type:"pattern",message:"Email non valide."}]}}),this.page=1}ngOnInit(){this.getData(),this.validations_form=this.formBuilder.group({email:new a.NI("",a.kI.compose([a.kI.required,a.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),firstname:new a.NI("",a.kI.compose([a.kI.maxLength(25),a.kI.minLength(3),a.kI.required])),lastname:new a.NI("",a.kI.compose([a.kI.maxLength(25),a.kI.minLength(3),a.kI.required]))})}getData(){return(0,p.mG)(this,void 0,void 0,function*(){const r=yield this.loadingCtrl.create({message:"Chargement..",spinner:"bubbles"});yield r.present(),this.page=1,this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(t=>{console.log(t),r.dismiss(),this.posts=t.data,this.total=t.total,this.per_page=t.per_page,this.currentpage=t.current_page,this.last_page=t.last_page})})}next(r){this.currentpage<this.last_page&&(this.page=this.page+1,this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(t=>{let o=t.data;for(let n of o)this.posts.push(n);this.total=t.total,this.per_page=t.per_page,this.currentpage=t.current_page,this.last_page=t.last_page})),r.target.complete()}doInfinite(r){return(0,p.mG)(this,void 0,void 0,function*(){this.next(r)})}onChangeWord(r){return(0,p.mG)(this,void 0,void 0,function*(){this.filter=r.target.value,this.page=1,setTimeout(()=>{this.getData()},800)})}onCancelword(r){}reset(){this.filter="",this.page=1,this.per_page=20,this.getData()}cancel(){this.modal.dismiss(null,"cancel")}onWillDismiss(r){}doSave(){var r=JSON.stringify({lastname:this.lastname,firstname:this.firstname,phone_number:this.phone,email:this.email,address:this.address,city:this.city,cp:this.cp,role:this.role,password:"admin"});console.log(r),this.redditService.adduser(r).subscribe(t=>{this.modal.dismiss(),this.getData(),console.log(t),setTimeout(()=>{this.router.navigateByUrl("/users"),this.lastname="",this.firstname="",this.phone="",this.email="",this.address="",this.city="",this.cp=""},400)})}prev(){this.page>1&&(this.page=this.page-1,this.getData())}forward(){this.currentpage<this.last_page&&(this.page=this.last_page,this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(r=>{console.log(r),this.posts=r.data,this.total=r.total,this.per_page=r.per_page,this.currentpage=r.current_page,this.last_page=r.last_page}))}backward(){this.currentpage>1&&(this.page=1,this.getData())}edit(r,t){return(0,p.mG)(this,void 0,void 0,function*(){this.router.navigateByUrl("/user-detail/"+t.id)})}}Object.defineProperty(d,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(r){return new(r||d)(e.Y36(i.SH),e.Y36(a.qu),e.Y36(i.Dh),e.Y36(i.Br),e.Y36(i._q),e.Y36(i.HT),e.Y36(v.I),e.Y36(b.F0),e.Y36(i.yF),e.Y36(i.HT))}}),Object.defineProperty(d,"\u0275cmp",{enumerable:!0,configurable:!0,writable:!0,value:e.Xpm({type:d,selectors:[["users"]],viewQuery:function(r,t){if(1&r&&e.Gf(i.ki,5),2&r){let o;e.iGM(o=e.CRH())&&(t.modal=o.first)}},decls:27,vars:2,consts:[["slot","start"],["slot","end"],["id","open-modal-register","color","primary",2,"display","none"],["name","add-circle"],[2,"background-color","#E4E4E4","border-radius","10px"],["size-xl","8","size-md","6","size-xs","12"],["size-xl","4","size-md","6","size-xs","12",2,"padding-top","12px"],["color","primary",3,"click"],["name","refresh-outline"],["color","primary"],["button","",3,"click",4,"ngFor","ngForOf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Chargement..."],["trigger","open-modal-register",3,"willDismiss"],["button","",3,"click"],["slot","start",2,"padding","3px",3,"ngStyle"],[3,"src"],[1,"ion-text-wrap"],["slot","end","color","primary"],[3,"click"],[1,"ion-padding"],["novalidate","",1,"list-form",3,"formGroup","ngSubmit"],["position","floating"],["name","person","item-start",""],["type","text","formControlName","firstname",3,"ngModel","ngModelChange"],[1,"border"],["type","text","formControlName","lastname",3,"ngModel","ngModelChange"],["name","at","item-start",""],["type","email","formControlName","email",3,"ngModel","ngModelChange"],["position","stacked"],["inputmode","text","placeholder","Adresse",3,"ngModel","ngModelChange"],["inputmode","text","placeholder","CP",3,"ngModel","ngModelChange"],["inputmode","text","placeholder","Ville",3,"ngModel","ngModelChange"],["inputmode","text","placeholder","T\xe9l\xe9phone",3,"ngModel","ngModelChange"],["expand","block","color","danger",3,"disabled","click"]],template:function(r,t){1&r&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Administrateurs "),e.qZA(),e.TgZ(6,"ion-buttons",1)(7,"ion-button",2),e._UZ(8,"ion-icon",3),e.qZA()()()(),e.TgZ(9,"ion-content")(10,"ion-content")(11,"ion-grid")(12,"ion-row",4),e._UZ(13,"ion-col",5),e.TgZ(14,"ion-col",6)(15,"ion-button",7),e.NdJ("click",function(){return t.reset()}),e._UZ(16,"ion-icon",8),e.qZA(),e.TgZ(17,"ion-button",9),e._uU(18," Nombre de r\xe9sultats : "),e.TgZ(19,"b"),e._uU(20),e.qZA()()()()(),e.TgZ(21,"ion-list"),e.YNc(22,P,12,7,"ion-item",10),e.qZA(),e.TgZ(23,"ion-infinite-scroll",11),e.NdJ("ionInfinite",function(n){return t.doInfinite(n)}),e._UZ(24,"ion-infinite-scroll-content",12),e.qZA()(),e.TgZ(25,"ion-modal",13),e.NdJ("willDismiss",function(n){return t.onWillDismiss(n)}),e.YNc(26,Z,45,9,"ng-template"),e.qZA()()),2&r&&(e.xp6(20),e.Oqu(t.total),e.xp6(2),e.Q6J("ngForOf",t.posts))},dependencies:[m.sg,m.PC,a._Y,a.JJ,a.JL,a.sg,a.u,a.On,i.BJ,i.yp,i.YG,i.Sm,i.wI,i.W2,i.jY,i.Gu,i.gu,i.ju,i.MB,i.pK,i.Ie,i.Q$,i.q_,i.fG,i.Nd,i.yW,i.wd,i.sr,i.ki,i.j9],styles:[".error-message[_ngcontent-%COMP%], .validation-errors[_ngcontent-%COMP%]{color:red}a[_ngcontent-%COMP%]{background-color:transparent;color:#000;text-decoration:underline}a[_ngcontent-%COMP%]:hover{background-color:transparent;color:red;text-decoration:underline}"]})});const w=[{path:"",component:d}];class g{}Object.defineProperty(g,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(r){return new(r||g)}}),Object.defineProperty(g,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:g})}),Object.defineProperty(g,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[b.Bz.forChild(w),b.Bz]})});class c{}Object.defineProperty(c,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(r){return new(r||c)}}),Object.defineProperty(c,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:c})}),Object.defineProperty(c,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[m.ez,a.UX,a.u5,i.Pc,g]})})}}]);