"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1769],{1769:(x,p,a)=>{a.r(p),a.d(p,{SurveyPageModule:()=>m});var h=a(6895),v=a(433),i=a(5035),f=a(4126),d=a(655),y=a(3124),e=a(8256),P=a(1053),w=a(7330);function _(s,t){if(1&s){const r=e.EpF();e.TgZ(0,"ion-item",8)(1,"ion-label",9),e.NdJ("click",function(o){const u=e.CHM(r).$implicit,n=e.oxw();return e.KtG(n.edit(o,u))}),e.TgZ(2,"ion-badge",10),e._uU(3," Question "),e.qZA(),e.TgZ(4,"ion-text",11)(5,"h2")(6,"b"),e._uU(7),e.qZA()()()(),e.TgZ(8,"ion-label",9),e.NdJ("click",function(o){const u=e.CHM(r).$implicit,n=e.oxw();return e.KtG(n.edit(o,u))}),e.TgZ(9,"ion-text")(10,"small"),e._uU(11," R\xe9ponse 1 "),e.qZA(),e.TgZ(12,"h2")(13,"b"),e._uU(14),e.qZA()()()(),e.TgZ(15,"ion-label",9),e.NdJ("click",function(o){const u=e.CHM(r).$implicit,n=e.oxw();return e.KtG(n.edit(o,u))}),e.TgZ(16,"ion-text")(17,"small"),e._uU(18," R\xe9ponse 2 "),e.qZA(),e.TgZ(19,"h2")(20,"b"),e._uU(21),e.qZA()()()(),e.TgZ(22,"ion-label",9),e.NdJ("click",function(o){const u=e.CHM(r).$implicit,n=e.oxw();return e.KtG(n.edit(o,u))}),e.TgZ(23,"ion-text")(24,"small"),e._uU(25," R\xe9ponse 3 "),e.qZA(),e.TgZ(26,"h2")(27,"b"),e._uU(28),e.qZA()()()(),e.TgZ(29,"ion-label",9),e.NdJ("click",function(o){const u=e.CHM(r).$implicit,n=e.oxw();return e.KtG(n.edit(o,u))}),e.TgZ(30,"ion-text")(31,"small"),e._uU(32," Bonne r\xe9ponse "),e.qZA(),e.TgZ(33,"h2")(34,"b"),e._uU(35),e.qZA()()()(),e.TgZ(36,"ion-button",12),e.NdJ("click",function(o){const u=e.CHM(r).$implicit,n=e.oxw();return e.KtG(n.delete(o,u))}),e._UZ(37,"ion-icon",13),e.qZA()()}if(2&s){const r=t.$implicit;e.xp6(7),e.hij(" ",r.question," "),e.xp6(7),e.hij(" ",r.answer1," "),e.xp6(7),e.hij(" ",r.answer2," "),e.xp6(7),e.hij(" ",r.answer3," "),e.xp6(7),e.hij(" ",r.answer5," ")}}class g{constructor(t,r,l,o,c,u,n,O,Z,T){Object.defineProperty(this,"navCtrl",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"popoverCtrl",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"alertController",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"route",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"loadingController",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"redditService",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.defineProperty(this,"router",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"toastCtrl",{enumerable:!0,configurable:!0,writable:!0,value:O}),Object.defineProperty(this,"localStore",{enumerable:!0,configurable:!0,writable:!0,value:Z}),Object.defineProperty(this,"modalCtrl",{enumerable:!0,configurable:!0,writable:!0,value:T}),Object.defineProperty(this,"posts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"title",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"price",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"table",{enumerable:!0,configurable:!0,writable:!0,value:"questions/questions_survey"}),Object.defineProperty(this,"file",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"gallery",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"idgallery",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"editurl",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:{placeholder:"Votre description ici...",tabsize:2,height:200,uploadImagePath:"/api/upload",dialogsInBody:!0,toolbar:[["misc",["codeview","undo","redo"]],["style",["bold","italic","underline","clear"]],["font",["bold","italic","underline","strikethrough","superscript","subscript","clear"]],["fontsize",["fontname","fontsize","color"]],["para",["style","ul","ol","paragraph","height"]],["insert",["link","picture"]]],fontNames:["Helvetica","Arial","Arial Black","Comic Sans MS","Courier New","Times"]}}),Object.defineProperty(this,"editorValue",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"UrlBase",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"UrlImage",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"subtitle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"category",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"iduser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"idquestion",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ngOnInit(){this.route.params.subscribe(t=>{this.id=t.id,this.getdata(),this.iduser=this.localStore.getItem("iduser"),this.UrlImage=this.redditService.getUrlImage()})}getdata(){return(0,d.mG)(this,void 0,void 0,function*(){this.redditService.getByid(this.table,this.id).subscribe(t=>{this.posts=t})})}doSave(){return(0,d.mG)(this,void 0,void 0,function*(){this.url=encodeURI(this.title);var t={id:this.id,title:this.title,content:this.content,price:this.price,url:this.url,image:this.image,view:this.view,order:this.order};console.log(t),this.redditService.update(this.table,this.id,t).toPromise().then(r=>{"news"==this.category?setTimeout(()=>{this.router.navigateByUrl("/posts")},600):"page"==this.category&&setTimeout(()=>{this.router.navigateByUrl("/public-posts")},600)})})}editurlseo(){return(0,d.mG)(this,void 0,void 0,function*(){this.editurl=!this.editurl})}onFileChange(t){this.file=t.target.files[0],console.log(this.file),this.submitForm()}submitForm(){return(0,d.mG)(this,void 0,void 0,function*(){let t=new FormData;t.append("image",this.file,this.file.name),t.append("title","Image "),console.log(t),this.redditService.uploadFormData(t).toPromise().then(r=>{this.image=r,setTimeout(()=>{},500)})})}delete(t,r){return(0,d.mG)(this,void 0,void 0,function*(){this.idquestion=r.id,yield(yield this.alertController.create({header:"Supprimer",message:"Voulez-vous vraiment ? ",buttons:[{text:"Annuler",role:"cancel",cssClass:"secondary",handler:o=>{}},{text:"Oui",handler:()=>{this.redditService.delete("questions",this.idquestion).toPromise().then(o=>{setTimeout(()=>{this.getdata()},400)})}}]})).present()})}edit(t,r){return(0,d.mG)(this,void 0,void 0,function*(){const l=yield this.modalCtrl.create({component:y.I,componentProps:{paramID:r.id}});return l.onDidDismiss().then(o=>{null!==o&&setTimeout(()=>{this.getdata()},400)}),yield l.present()})}addquestion(){var t=JSON.stringify({category:this.id,edited_by:this.iduser,view:0});console.log(t),this.redditService.addPost("questions",t).subscribe(r=>{this.getdata(),setTimeout(()=>{},400)})}}Object.defineProperty(g,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return new(t||g)(e.Y36(i.SH),e.Y36(i.Dh),e.Y36(i.Br),e.Y36(f.gz),e.Y36(i.HT),e.Y36(P.I),e.Y36(f.F0),e.Y36(i.yF),e.Y36(w.C),e.Y36(i.IN))}}),Object.defineProperty(g,"\u0275cmp",{enumerable:!0,configurable:!0,writable:!0,value:e.Xpm({type:g,selectors:[["app-survey"]],decls:16,vars:1,consts:[["color","secondary"],["slot","start"],["responsive-sm","",1,"ion-padding"],["sizeLg","12","sizeMd","12","sizeXs","12"],["button","",4,"ngFor","ngForOf"],["color","secondary",3,"click"],["name","add-circle"],["sizeLg","4","sizeMd","4","sizeXs","12",1,"padding"],["button",""],[3,"click"],["color","success","slot","end"],[1,"ion-text-wrap"],["ion-button","","outline","","item-end","","small","","color","light",3,"click"],["name","trash-outline"]],template:function(t,r){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Questionnaire "),e.qZA()()(),e.TgZ(6,"ion-content",2)(7,"ion-row")(8,"ion-col",3)(9,"ion-list"),e.YNc(10,_,38,5,"ion-item",4),e.qZA(),e.TgZ(11,"ion-buttons",0)(12,"ion-button",5),e.NdJ("click",function(){return r.addquestion()}),e._UZ(13,"ion-icon",6),e._uU(14," Ajouter "),e.qZA()()(),e._UZ(15,"ion-col",7),e.qZA()()),2&t&&(e.xp6(10),e.Q6J("ngForOf",r.posts))},dependencies:[h.sg,i.oU,i.yp,i.YG,i.Sm,i.wI,i.W2,i.Gu,i.gu,i.Ie,i.Q$,i.q_,i.Nd,i.yW,i.wd,i.sr,i.cs]})});const j=[{path:"",component:g}];class b{}Object.defineProperty(b,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return new(t||b)}}),Object.defineProperty(b,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:b})}),Object.defineProperty(b,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[f.Bz.forChild(j),f.Bz]})});class m{}Object.defineProperty(m,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return new(t||m)}}),Object.defineProperty(m,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:m})}),Object.defineProperty(m,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[h.ez,v.u5,i.Pc,b]})})}}]);