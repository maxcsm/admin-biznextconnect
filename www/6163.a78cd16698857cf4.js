"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6163],{6163:(j,y,l)=>{l.r(y),l.d(y,{CategoryDetailPageModule:()=>d});var p=l(6895),g=l(433),r=l(5035),h=l(4126),u=l(655),m=l(6388),e=l(8256),_=l(1053);function w(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",10)(2,"ion-label",12)(3,"b"),e._uU(4,"Contenu"),e.qZA()(),e.TgZ(5,"ion-item",11)(6,"div",28),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.content=o)}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(6),e.Q6J("ngxSummernote",t.config)("ngModel",t.content)}}function C(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",10)(2,"ion-item",11)(3,"ion-label",12),e._uU(4,"Description"),e.qZA(),e.TgZ(5,"ion-textarea",29),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.content=o)}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(5),e.Q6J("autoGrow",!0)("ngModel",t.content)}}function P(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",10)(2,"ion-item",11)(3,"ion-label",12),e._uU(4,"Image "),e.qZA(),e.TgZ(5,"ion-input",30),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.image=o)}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.image)}}function Z(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"ion-item",31)(1,"ion-thumbnail",1),e._uU(2),e.qZA(),e._UZ(3,"ion-icon",32),e.TgZ(4,"ion-label"),e._uU(5),e.qZA(),e.TgZ(6,"ion-button",33),e.NdJ("click",function(o){const f=e.CHM(t).$implicit,v=e.oxw();return e.KtG(v.delete(o,f))}),e._UZ(7,"ion-icon",34),e.qZA()()}if(2&a){const t=i.$implicit;e.xp6(2),e.hij(" ",t.id," "),e.xp6(3),e.hij(" ",t.tag_fr," ")}}class b{constructor(i,t,n,o,s,f,v,T){Object.defineProperty(this,"navCtrl",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"popoverCtrl",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"alertController",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"route",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"loadingController",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"redditService",{enumerable:!0,configurable:!0,writable:!0,value:f}),Object.defineProperty(this,"router",{enumerable:!0,configurable:!0,writable:!0,value:v}),Object.defineProperty(this,"toastCtrl",{enumerable:!0,configurable:!0,writable:!0,value:T}),Object.defineProperty(this,"posts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"title",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"price",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"table",{enumerable:!0,configurable:!0,writable:!0,value:"tags"}),Object.defineProperty(this,"file",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"gallery",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"idgallery",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"editurl",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:{placeholder:"Votre description ici...",tabsize:2,height:200,uploadImagePath:"/api/upload",dialogsInBody:!0,toolbar:[["misc",["codeview","undo","redo"]],["style",["bold","italic","underline","clear"]],["font",["bold","italic","underline","strikethrough","superscript","subscript","clear"]],["fontsize",["fontname","fontsize","color"]],["para",["style","ul","ol","paragraph","height"]],["insert",["link","picture"]]],fontNames:["Helvetica","Arial","Arial Black","Comic Sans MS","Courier New","Times"]}}),Object.defineProperty(this,"editorValue",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"UrlBase",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"UrlImage",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"subtitle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"category",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subcategories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subcategory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"idtag",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"format",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"base64",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ngOnInit(){this.route.params.subscribe(i=>{this.idtag=i.id,this.getdata(),this.getSubCategories(),this.UrlImage=this.redditService.getUrlImage()})}getSubCategories(){return(0,u.mG)(this,void 0,void 0,function*(){this.redditService.getByid("public_types",this.idtag).subscribe(i=>{this.subcategories=i.data,console.log(this.subcategories)})})}getdata(){return(0,u.mG)(this,void 0,void 0,function*(){this.redditService.getByid(this.table,this.idtag).subscribe(i=>{this.posts=[i],console.log(this.posts),this.id=this.posts[0].id,this.title=this.posts[0].tag_fr,this.subtitle=this.posts[0].subtitle,this.content=this.posts[0].content,this.url=this.posts[0].url,this.image=this.posts[0].image,this.price=this.posts[0].price,this.view=this.posts[0].view,this.category=this.posts[0].category,this.order=this.posts[0].order})})}galleryByPost(){return(0,u.mG)(this,void 0,void 0,function*(){this.redditService.getByid("gallerybypost",this.id).subscribe(i=>{this.gallery=i.data})})}delete(i,t){return(0,u.mG)(this,void 0,void 0,function*(){this.id=t.id,yield(yield this.alertController.create({header:"Supprimer",message:"Voulez-vous vraiment ? ",buttons:[{text:"Annuler",role:"cancel",cssClass:"secondary",handler:o=>{}},{text:"Oui",handler:()=>{this.redditService.delete(this.table,this.id).toPromise().then(o=>{setTimeout(()=>{this.getSubCategories()},400)})}}]})).present()})}doSave(){return(0,u.mG)(this,void 0,void 0,function*(){this.url=encodeURI(this.title);var i={id:this.id,tag_fr:this.title,image:this.image};console.log(i),this.redditService.update(this.table,this.id,i).toPromise().then(t=>{setTimeout(()=>{this.router.navigateByUrl("/categories")},600)})})}editurlseo(){return(0,u.mG)(this,void 0,void 0,function*(){this.editurl=!this.editurl})}addFormGallery(){return(0,u.mG)(this,void 0,void 0,function*(){const i=yield m.V1.getPhoto({resultType:m.dk.Base64,quality:2,source:m.oK.Photos});this.format=i.format,this.base64=i.base64String;var t=JSON.stringify({format:this.format,base64:this.base64});this.redditService.uploadImageTag(t).toPromise().then(n=>(0,u.mG)(this,void 0,void 0,function*(){this.image=n,console.log(n),setTimeout(()=>(0,u.mG)(this,void 0,void 0,function*(){}),1e3)})).catch(n=>console.log(n))})}doCancel(){return(0,u.mG)(this,void 0,void 0,function*(){this.router.navigateByUrl("/categories")})}NewSave(){var i=JSON.stringify({tag_fr:this.subcategory,type:this.idtag,isChecked:0,image:""});this.redditService.addPost("tags",i).subscribe(t=>{console.log(t),setTimeout(()=>{this.getSubCategories(),this.subcategory=""},400)})}}Object.defineProperty(b,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return new(i||b)(e.Y36(r.SH),e.Y36(r.Dh),e.Y36(r.Br),e.Y36(h.gz),e.Y36(r.HT),e.Y36(_.I),e.Y36(h.F0),e.Y36(r.yF))}}),Object.defineProperty(b,"\u0275cmp",{enumerable:!0,configurable:!0,writable:!0,value:e.Xpm({type:b,selectors:[["app-category-detail"]],decls:69,vars:11,consts:[["color","secondary"],["slot","start"],["responsive-sm","",1,"ion-padding"],["sizeLg","8","sizeMd","8","sizeXs","12"],["lines","none"],[2,"display","none"],["sizeLg","6","sizeMd","6","sizeXs","12"],[3,"ngModel","ngModelChange"],["value","0"],["value","1"],["sizeLg","12","sizeMd","12","sizeXs","12"],[1,"roundedInput"],["position","stacked"],["inputmode","text","placeholder","Cat\xe9gorie",3,"ngModel","ngModelChange"],["inputmode","text","placeholder","Sous titre",3,"ngModel","ngModelChange"],["inputmode","text","placeholder","1",3,"ngModel","ngModelChange"],[4,"ngIf"],["color","secondary","size","medium",3,"click"],[2,"width","200px",3,"src"],["sizeLg","4","sizeMd","4","sizeXs","12"],["slot","end",1,"item-note"],["color","light","size","medium",3,"click"],["button","",4,"ngFor","ngForOf"],["sizeLg","9","sizeMd","9","sizeXs","9"],["inputmode","text","placeholder","Sous-categorie",3,"ngModel","ngModelChange"],["sizeLg","3","sizeMd","3","sizeXs","3"],["ion-button","","outline","","expand","full","color","primary",3,"click"],["sizeLg","4","sizeMd","4","sizeXs","12",1,"padding"],[3,"ngxSummernote","ngModel","ngModelChange"],["placeholder","Ajoutez une description ...",3,"autoGrow","ngModel","ngModelChange"],["inputmode","text","placeholder","",3,"ngModel","ngModelChange"],["button",""],["name","pricetag","color","secondary"],["ion-button","","outline","","item-end","","small","","color","light",3,"click"],["name","trash-outline"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Sous-categorie "),e.qZA()()(),e.TgZ(6,"ion-content",2)(7,"ion-row")(8,"ion-col",3)(9,"ion-list",4)(10,"ion-row",5)(11,"ion-col",6)(12,"select",7),e.NdJ("ngModelChange",function(o){return t.view=o}),e.TgZ(13,"option",8),e._uU(14," Brouillon "),e.qZA(),e.TgZ(15,"option",9),e._uU(16," Publi\xe9 "),e.qZA()()(),e._UZ(17,"ion-col",6),e.qZA(),e.TgZ(18,"ion-row")(19,"ion-col",10)(20,"ion-item",11)(21,"ion-label",12),e._uU(22,"Cat\xe9gorie"),e.qZA(),e.TgZ(23,"ion-input",13),e.NdJ("ngModelChange",function(o){return t.title=o}),e.qZA()()()(),e.TgZ(24,"ion-row",5)(25,"ion-col",10)(26,"ion-item",11)(27,"ion-label",12),e._uU(28,"Sous titre"),e.qZA(),e.TgZ(29,"ion-input",14),e.NdJ("ngModelChange",function(o){return t.subtitle=o}),e.qZA()()()(),e.TgZ(30,"ion-row",5)(31,"ion-col",10)(32,"ion-item",11)(33,"ion-label",12),e._uU(34,"Ordre"),e.qZA(),e.TgZ(35,"ion-input",15),e.NdJ("ngModelChange",function(o){return t.order=o}),e.qZA()()()(),e.YNc(36,w,7,2,"ion-row",16),e.YNc(37,C,6,2,"ion-row",16),e.TgZ(38,"ion-row")(39,"ion-col",3)(40,"ion-item")(41,"h5"),e._uU(42," Ajouter une image ( 300 px X 200 px recommand\xe9)"),e.qZA()(),e.TgZ(43,"ion-item")(44,"ion-button",17),e.NdJ("click",function(){return t.addFormGallery()}),e._uU(45,"Ajouter une image"),e.qZA()(),e._UZ(46,"img",18),e.qZA(),e._UZ(47,"ion-col",19),e.qZA(),e.YNc(48,P,6,1,"ion-row",16),e.TgZ(49,"ion-item")(50,"div",20)(51,"ion-button",21),e.NdJ("click",function(){return t.doCancel()}),e._uU(52,"Annuler "),e.qZA(),e.TgZ(53,"ion-button",17),e.NdJ("click",function(){return t.doSave()}),e._uU(54,"Enregistrer"),e.qZA()()()(),e.TgZ(55,"h2"),e._uU(56," Les sous-cat\xe9gories"),e.qZA(),e.TgZ(57,"ion-list"),e.YNc(58,Z,8,2,"ion-item",22),e.qZA(),e.TgZ(59,"ion-row")(60,"ion-col",23)(61,"ion-item",11)(62,"ion-label",12),e._uU(63,"Sous-categorie"),e.qZA(),e.TgZ(64,"ion-input",24),e.NdJ("ngModelChange",function(o){return t.subcategory=o}),e.qZA()()(),e.TgZ(65,"ion-col",25)(66,"ion-button",26),e.NdJ("click",function(){return t.NewSave()}),e._uU(67," Ajouter "),e.qZA()()()(),e._UZ(68,"ion-col",27),e.qZA()()),2&i&&(e.xp6(12),e.Q6J("ngModel",t.view),e.xp6(11),e.Q6J("ngModel",t.title),e.xp6(6),e.Q6J("ngModel",t.subtitle),e.xp6(6),e.Q6J("ngModel",t.order),e.xp6(1),e.Q6J("ngIf","page"==t.category),e.xp6(1),e.Q6J("ngIf","news"==t.category),e.xp6(9),e.hYB("src","",t.UrlImage,"home/",t.image,"",e.LSH),e.xp6(2),e.Q6J("ngIf","page"==t.category),e.xp6(10),e.Q6J("ngForOf",t.subcategories),e.xp6(6),e.Q6J("ngModel",t.subcategory))},dependencies:[p.sg,p.O5,g.YN,g.Kr,g.EJ,g.JJ,g.On,r.oU,r.YG,r.Sm,r.wI,r.W2,r.Gu,r.gu,r.pK,r.Ie,r.Q$,r.q_,r.Nd,r.g2,r.Bs,r.wd,r.sr,r.j9,r.cs]})});const M=[{path:"",component:b}];class c{}Object.defineProperty(c,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return new(i||c)}}),Object.defineProperty(c,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:c})}),Object.defineProperty(c,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[h.Bz.forChild(M),h.Bz]})});class d{}Object.defineProperty(d,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return new(i||d)}}),Object.defineProperty(d,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:d})}),Object.defineProperty(d,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[p.ez,g.u5,r.Pc,c]})})}}]);