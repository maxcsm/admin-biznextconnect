"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3015],{3015:(q,f,g)=>{g.r(f),g.d(f,{AdminPageModule:()=>p});var b=g(6895),u=g(433),n=g(5035),h=g(4126),d=g(655),e=g(8256),v=g(1053);function y(l,i){1&l&&(e.TgZ(0,"ion-badge",28),e._uU(1," Client "),e.qZA())}function Z(l,i){1&l&&(e.TgZ(0,"ion-badge",21),e._uU(1," Admin "),e.qZA())}function x(l,i){1&l&&(e.TgZ(0,"ion-badge",29),e._uU(1," Fournissseur "),e.qZA())}const P=function(l){return{"background-color":l}};function A(l,i){if(1&l){const t=e.EpF();e.TgZ(0,"ion-item",16)(1,"ion-avatar",17),e._UZ(2,"img",18),e.qZA(),e.TgZ(3,"ion-label",19),e.NdJ("click",function(r){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.edit(r,s))}),e.TgZ(4,"ion-text")(5,"small"),e._uU(6),e.qZA(),e.TgZ(7,"h2")(8,"b"),e._uU(9),e.qZA()()()(),e.TgZ(10,"ion-label",20),e.NdJ("click",function(r){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.edit(r,s))}),e.TgZ(11,"ion-text")(12,"h2"),e._uU(13),e.qZA()()(),e.TgZ(14,"ion-label",20),e.NdJ("click",function(r){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.edit(r,s))}),e.TgZ(15,"ion-badge",21),e._uU(16),e.qZA()(),e.TgZ(17,"ion-label",20),e.NdJ("click",function(r){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.edit(r,s))}),e.TgZ(18,"ion-badge",22),e._uU(19),e.qZA()(),e.TgZ(20,"ion-label",20),e.NdJ("click",function(r){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.edit(r,s))}),e.YNc(21,y,2,0,"ion-badge",23),e.YNc(22,Z,2,0,"ion-badge",24),e.YNc(23,x,2,0,"ion-badge",25),e.qZA(),e.TgZ(24,"ion-button",26),e.NdJ("click",function(r){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.delete(r,s))}),e._UZ(25,"ion-icon",27),e.qZA()()}if(2&l){const t=i.$implicit;e.xp6(1),e.Q6J("ngStyle",e.VKq(11,P,t.color)),e.xp6(1),e.s9C("src",t.user_avatar,e.LSH),e.xp6(4),e.hij(" ID ",t.id,""),e.xp6(3),e.AsE(" ",t.lastname," ",t.firstname," "),e.xp6(4),e.hij("",t.email," "),e.xp6(3),e.hij(" ",t.category," "),e.xp6(3),e.hij(" ",t.session_id," "),e.xp6(2),e.Q6J("ngIf",1==t.role),e.xp6(1),e.Q6J("ngIf",3==t.role),e.xp6(1),e.Q6J("ngIf",4==t.role)}}function C(l,i){if(1&l){const t=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar"),e._UZ(2,"ion-buttons",1),e.TgZ(3,"ion-title"),e._uU(4," Ajouter "),e.qZA(),e.TgZ(5,"ion-buttons",30)(6,"ion-button",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.modal.dismiss())}),e._uU(7," Annuler "),e.qZA()()()(),e.TgZ(8,"ion-content",31)(9,"form",32),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.doSave())}),e.TgZ(10,"ion-item")(11,"ion-label",33),e._UZ(12,"ion-icon",34),e._uU(13," Pr\xe9nom * "),e.qZA(),e.TgZ(14,"ion-input",35),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.firstname=r)}),e.qZA()(),e.TgZ(15,"ion-item",36)(16,"ion-label",33),e._UZ(17,"ion-icon",34),e._uU(18," Nom * "),e.qZA(),e.TgZ(19,"ion-input",37),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.lastname=r)}),e.qZA()(),e.TgZ(20,"ion-item",36)(21,"ion-label",33),e._UZ(22,"ion-icon",38),e._uU(23," Email * "),e.qZA(),e.TgZ(24,"ion-input",39),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.email=r)}),e.qZA()()(),e.TgZ(25,"ion-item")(26,"ion-label",33),e._UZ(27,"ion-icon",34),e._uU(28," Nom entreprise "),e.qZA(),e.TgZ(29,"ion-input",40),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.company=r)}),e.qZA()(),e.TgZ(30,"ion-item")(31,"ion-label",41),e._uU(32," Adresse "),e.qZA(),e.TgZ(33,"ion-input",42),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.address=r)}),e.qZA()(),e.TgZ(34,"ion-item")(35,"ion-label",41),e._uU(36," CP "),e.qZA(),e.TgZ(37,"ion-input",43),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.cp=r)}),e.qZA()(),e.TgZ(38,"ion-item")(39,"ion-label",41),e._uU(40," Ville "),e.qZA(),e.TgZ(41,"ion-input",44),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.city=r)}),e.qZA()(),e.TgZ(42,"ion-item")(43,"ion-label",41),e._uU(44,"T\xe9l\xe9phone"),e.qZA(),e.TgZ(45,"ion-input",45),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.phone=r)}),e.qZA()(),e.TgZ(46,"p"),e._uU(47," L'utilisateur va re\xe7evoir un mot de passe provisoire."),e.qZA(),e.TgZ(48,"ion-button",46),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.doSave())}),e._uU(49,"Enregister"),e.qZA()()}if(2&l){const t=e.oxw();e.xp6(9),e.Q6J("formGroup",t.validations_form),e.xp6(5),e.Q6J("ngModel",t.firstname),e.xp6(5),e.Q6J("ngModel",t.lastname),e.xp6(5),e.Q6J("ngModel",t.email),e.xp6(5),e.Q6J("ngModel",t.company),e.xp6(4),e.Q6J("ngModel",t.address),e.xp6(4),e.Q6J("ngModel",t.cp),e.xp6(4),e.Q6J("ngModel",t.city),e.xp6(4),e.Q6J("ngModel",t.phone),e.xp6(3),e.Q6J("disabled",!t.validations_form.value)}}const T=function(){return["/register"]};class _{constructor(i,t,o,r,a,s,c,M,j,O){Object.defineProperty(this,"navCtrl",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"formBuilder",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"popoverCtrl",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"alertController",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"menu",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"loadingController",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"redditService",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"router",{enumerable:!0,configurable:!0,writable:!0,value:M}),Object.defineProperty(this,"toastCtrl",{enumerable:!0,configurable:!0,writable:!0,value:j}),Object.defineProperty(this,"loadingCtrl",{enumerable:!0,configurable:!0,writable:!0,value:O}),Object.defineProperty(this,"modal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rolename",{enumerable:!0,configurable:!0,writable:!0,value:"client"}),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"table",{enumerable:!0,configurable:!0,writable:!0,value:"users"}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"posts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"category",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"wordid",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"total",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"last_page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"per_page",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"order_id",{enumerable:!0,configurable:!0,writable:!0,value:"id"}),Object.defineProperty(this,"order_by",{enumerable:!0,configurable:!0,writable:!0,value:"desc"}),Object.defineProperty(this,"email_verified_at",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentpage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"email",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"address",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"city",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"phone",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstname",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastname",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"company",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formgroup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validations_form",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validation_messages",{enumerable:!0,configurable:!0,writable:!0,value:{firstname:[{type:"required",message:"Pr\xe9nom requis."},{type:"minlength",message:"3 caract\xe8res minimum."},{type:"maxlength",message:"25 caract\xe8res maximum."}],lastname:[{type:"required",message:"Nom requis."},{type:"minlength",message:"3 caract\xe8res minimum."},{type:"maxlength",message:"25 caract\xe8res maximum."}],email:[{type:"required",message:"Email requis."},{type:"pattern",message:"Email non valide."}]}}),this.page=1}ngOnInit(){this.validations_form=this.formBuilder.group({email:new u.NI("",u.kI.compose([u.kI.required,u.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),firstname:new u.NI("",u.kI.compose([u.kI.maxLength(25),u.kI.minLength(3),u.kI.required])),lastname:new u.NI("",u.kI.compose([u.kI.maxLength(25),u.kI.minLength(3),u.kI.required]))})}ionViewWillEnter(){this.getData()}getData(){return(0,d.mG)(this,void 0,void 0,function*(){const i=yield this.loadingCtrl.create({message:"Chargement..",spinner:"bubbles"});yield i.present(),this.page=1,this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(t=>{i.dismiss(),this.posts=t.data,this.total=t.total,this.per_page=t.per_page,this.currentpage=t.current_page,this.last_page=t.last_page})})}next(i){this.currentpage<this.last_page&&(this.page=this.page+1,this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(t=>{let o=t.data;for(let r of o)this.posts.push(r);this.total=t.total,this.per_page=t.per_page,this.currentpage=t.current_page,this.last_page=t.last_page})),i.target.complete()}doInfinite(i){return(0,d.mG)(this,void 0,void 0,function*(){this.next(i)})}handleChange(i){const t=i.target.value.toLowerCase();this.filter=t,this.filter=i.target.value,this.page=1,setTimeout(()=>{this.getDataFilter()},1e3)}getDataFilter(){return(0,d.mG)(this,void 0,void 0,function*(){this.page=1,this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(i=>{this.posts=i.data,this.total=i.total,this.per_page=i.per_page,this.currentpage=i.current_page,this.last_page=i.last_page})})}onChangeWord(i){return(0,d.mG)(this,void 0,void 0,function*(){this.filter=i.target.value,this.page=1,setTimeout(()=>{this.getDataFilter()},1e3)})}onCancelword(i){}reset(){this.filter="",this.page=1,this.per_page=20,this.getData()}cancel(){this.modal.dismiss(null,"cancel")}onWillDismiss(i){}doSave(){var i=JSON.stringify({lastname:this.lastname,firstname:this.firstname,phone_number:this.phone,email:this.email,address:this.address,city:this.city,cp:this.cp,role:this.role,company:this.company});console.log(i),this.redditService.adduser(i).subscribe(t=>{this.modal.dismiss(),this.getData(),console.log(t),setTimeout(()=>{this.router.navigateByUrl("/customers"),this.lastname="",this.firstname="",this.phone="",this.email="",this.address="",this.city="",this.cp="",this.company=""},400)})}prev(){this.page>1&&(this.page=this.page-1,this.getData())}forward(){this.currentpage<this.last_page&&(this.page=this.last_page,this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(i=>{console.log(i),this.posts=i.data,this.total=i.total,this.per_page=i.per_page,this.currentpage=i.current_page,this.last_page=i.last_page}))}backward(){this.currentpage>1&&(this.page=1,this.getData())}edit(i,t){return(0,d.mG)(this,void 0,void 0,function*(){this.router.navigateByUrl("/profil/"+t.id)})}delete(i,t){return(0,d.mG)(this,void 0,void 0,function*(){this.id=t.id,yield(yield this.alertController.create({header:"Supprimer",message:"Voulez-vous vraiment ? ",buttons:[{text:"Annuler",role:"cancel",cssClass:"secondary",handler:r=>{}},{text:"Oui",handler:()=>{this.redditService.delete(this.table,this.id).toPromise().then(r=>{console.log(r),setTimeout(()=>{this.getData()},400)})}}]})).present()})}}Object.defineProperty(_,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return new(i||_)(e.Y36(n.SH),e.Y36(u.qu),e.Y36(n.Dh),e.Y36(n.Br),e.Y36(n._q),e.Y36(n.HT),e.Y36(v.I),e.Y36(h.F0),e.Y36(n.yF),e.Y36(n.HT))}}),Object.defineProperty(_,"\u0275cmp",{enumerable:!0,configurable:!0,writable:!0,value:e.Xpm({type:_,selectors:[["app-admin"]],viewQuery:function(i,t){if(1&i&&e.Gf(n.ki,5),2&i){let o;e.iGM(o=e.CRH())&&(t.modal=o.first)}},decls:28,vars:5,consts:[["color","secondary"],["slot","start"],["slot","end"],[2,"display","none",3,"routerLink"],["name","add-circle"],[2,"background-color","#E4E4E4","border-radius","10px"],["size-xl","8","size-md","6","size-xs","12"],["type","text","placeholder","id, nom, pr\xe9nom, entreprise, email","debounce","200",3,"ngModel","ngModelChange","ionChange"],["size-xl","4","size-md","6","size-xs","12",2,"padding-top","12px"],["color","light",3,"click"],["name","refresh-outline"],["color","light"],["button","",4,"ngFor","ngForOf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Chargement..."],["trigger","open-modal-register-customer",3,"willDismiss"],["button",""],["slot","start",2,"padding","3px",3,"ngStyle"],[3,"src"],[3,"click"],[1,"ion-hide-sm-down",3,"click"],["color","success","slot","end"],["color","medium","slot","end"],["color","danger","slot","end",4,"ngIf"],["color","success","slot","end",4,"ngIf"],["color","light","slot","end",4,"ngIf"],["ion-button","","outline","","item-end","","small","","color","light",3,"click"],["name","trash-outline"],["color","danger","slot","end"],["color","light","slot","end"],["slot","end","color","primary"],[1,"ion-padding"],["novalidate","",1,"list-form",3,"formGroup","ngSubmit"],["position","floating"],["name","person","item-start",""],["type","text","formControlName","firstname",3,"ngModel","ngModelChange"],[1,"border"],["type","text","formControlName","lastname",3,"ngModel","ngModelChange"],["name","at","item-start",""],["type","email","formControlName","email",3,"ngModel","ngModelChange"],["type","text",3,"ngModel","ngModelChange"],["position","stacked"],["inputmode","text","placeholder","Adresse",3,"ngModel","ngModelChange"],["inputmode","text","placeholder","CP",3,"ngModel","ngModelChange"],["inputmode","text","placeholder","Ville",3,"ngModel","ngModelChange"],["inputmode","text","placeholder","T\xe9l\xe9phone",3,"ngModel","ngModelChange"],["expand","block","color","danger",3,"disabled","click"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Admins "),e.qZA(),e.TgZ(6,"ion-buttons",2)(7,"ion-button",3),e._UZ(8,"ion-icon",4),e._uU(9," Ajouter un client "),e.qZA()()()(),e.TgZ(10,"ion-content")(11,"ion-grid")(12,"ion-row",5)(13,"ion-col",6)(14,"ion-searchbar",7),e.NdJ("ngModelChange",function(r){return t.filter=r})("ionChange",function(r){return t.handleChange(r)}),e.qZA()(),e.TgZ(15,"ion-col",8)(16,"ion-button",9),e.NdJ("click",function(){return t.reset()}),e._UZ(17,"ion-icon",10),e.qZA(),e.TgZ(18,"ion-button",11),e._uU(19," Nombre de r\xe9sultats : "),e.TgZ(20,"b"),e._uU(21),e.qZA()()()()(),e.TgZ(22,"ion-list"),e.YNc(23,A,26,13,"ion-item",12),e.qZA(),e.TgZ(24,"ion-infinite-scroll",13),e.NdJ("ionInfinite",function(r){return t.doInfinite(r)}),e._UZ(25,"ion-infinite-scroll-content",14),e.qZA()(),e.TgZ(26,"ion-modal",15),e.NdJ("willDismiss",function(r){return t.onWillDismiss(r)}),e.YNc(27,C,50,10,"ng-template"),e.qZA()),2&i&&(e.xp6(7),e.Q6J("routerLink",e.DdM(4,T)),e.xp6(7),e.Q6J("ngModel",t.filter),e.xp6(7),e.Oqu(t.total),e.xp6(2),e.Q6J("ngForOf",t.posts))},dependencies:[b.sg,b.O5,b.PC,u._Y,u.JJ,u.JL,u.On,n.BJ,n.yp,n.YG,n.Sm,n.wI,n.W2,n.jY,n.Gu,n.gu,n.ju,n.MB,n.pK,n.Ie,n.Q$,n.q_,n.fG,n.Nd,n.VI,n.yW,n.wd,n.sr,n.ki,n.j9,n.YI,h.rH]})});const w=[{path:"",component:_}];class m{}Object.defineProperty(m,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return new(i||m)}}),Object.defineProperty(m,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:m})}),Object.defineProperty(m,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[h.Bz.forChild(w),h.Bz]})});class p{}Object.defineProperty(p,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return new(i||p)}}),Object.defineProperty(p,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:p})}),Object.defineProperty(p,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[b.ez,u.u5,n.Pc,m]})})}}]);