"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4987],{4987:(S,p,n)=>{n.r(p),n.d(p,{LoginPageModule:()=>d});var m=n(6895),a=n(433),t=n(5035),g=n(4126),u=n(655),e=n(8256),f=n(1053),h=n(849),v=n(4512),y=n(7330);function w(l,r){1&l&&(e.TgZ(0,"p",22)(1,"ion-text",23),e._uU(2," * Email requis. "),e.qZA()())}function P(l,r){1&l&&(e.TgZ(0,"p",24)(1,"ion-text",23),e._uU(2," * Mot de passe requis. "),e.qZA()())}const O=function(){return["/forgotpassword"]},x=function(){return["/register"]};class b{constructor(r,o,i,c,j,M,Z,L,I,A,T,U){Object.defineProperty(this,"navCtrl",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"menu",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"toastCtrl",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"alertCtrl",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"LoadingController",{enumerable:!0,configurable:!0,writable:!0,value:j}),Object.defineProperty(this,"formBuilder",{enumerable:!0,configurable:!0,writable:!0,value:M}),Object.defineProperty(this,"redditService",{enumerable:!0,configurable:!0,writable:!0,value:Z}),Object.defineProperty(this,"router",{enumerable:!0,configurable:!0,writable:!0,value:L}),Object.defineProperty(this,"alertController",{enumerable:!0,configurable:!0,writable:!0,value:I}),Object.defineProperty(this,"storage",{enumerable:!0,configurable:!0,writable:!0,value:A}),Object.defineProperty(this,"authService",{enumerable:!0,configurable:!0,writable:!0,value:T}),Object.defineProperty(this,"localStore",{enumerable:!0,configurable:!0,writable:!0,value:U}),Object.defineProperty(this,"email",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"token",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onLoginForm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"roleUser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"table",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"per_page",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"category",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order_by",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"products",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ionViewWillEnter(){this.menu.enable(!1)}ngOnInit(){this.email=this.localStore.getItem("email"),this.password=this.localStore.getItem("password"),this.onLoginForm=this.formBuilder.group({email:[null,a.kI.compose([a.kI.required])],password:[null,a.kI.compose([a.kI.required])]})}goLogin(){return(0,u.mG)(this,void 0,void 0,function*(){const r=yield this.LoadingController.create({message:"Connexion en cours"});r.present();var o=JSON.stringify({email:this.email,password:this.password});this.redditService.login(o).subscribe(i=>(0,u.mG)(this,void 0,void 0,function*(){setTimeout(()=>{r.dismiss()},1300),console.log(i),1==i.data.user.admin?(this.authService.ifLoggedIn(),(yield this.toastCtrl.create({cssClass:"bg-profile",message:"Connexion r\xe9ussie ",duration:3e3,position:"bottom"})).present(),this.roleUser=i.data.user.role,this.localStore.saveItem("session_id",i.data.user.session_id),this.localStore.saveItem("iduser",i.data.user.id),this.localStore.saveItem("category",i.data.user.category),this.localStore.saveItem("role",i.data.user.role),this.localStore.saveItem("email",this.email),this.localStore.saveItem("password",this.password),this.localStore.saveItem("token",i.data.token),setTimeout(()=>{this.router.navigateByUrl("/home"),this.getMenu()},2e3)):this.presentAlertError()}),i=>{r.dismiss()})})}goToRegister(){return(0,u.mG)(this,void 0,void 0,function*(){this.router.navigateByUrl("/register")})}forgotPass(){return(0,u.mG)(this,void 0,void 0,function*(){this.router.navigateByUrl("/forgotpassword")})}presentAlert(){return(0,u.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Erreur",subHeader:"",message:"E-mail ou mot de passe incorrect",buttons:[{text:"Ok",cssClass:"primary",handler:o=>{console.log("Confirm Ok: blah")}},{text:"Annuler",cssClass:"secondary",handler:o=>{console.log("Confirm Cancel: blah")}}]})).present()})}presentAlertError(){return(0,u.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Erreur",subHeader:"",message:"Identifiant ou mot passe incorrect ",buttons:[{text:"Ok",cssClass:"secondary",handler:o=>{console.log("Confirm Ok: blah")}},{text:"Annuler",cssClass:"secondary",handler:o=>{console.log("Confirm Cancel: blah")}}]})).present()})}getMenu(){this.menu.enable(!0,"menu3")}}Object.defineProperty(b,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(r){return new(r||b)(e.Y36(t.SH),e.Y36(t._q),e.Y36(t.yF),e.Y36(t.Br),e.Y36(t.HT),e.Y36(a.qu),e.Y36(f.I),e.Y36(g.F0),e.Y36(t.Br),e.Y36(h.K),e.Y36(v.$),e.Y36(y.C))}}),Object.defineProperty(b,"\u0275cmp",{enumerable:!0,configurable:!0,writable:!0,value:e.Xpm({type:b,selectors:[["app-login"]],decls:39,vars:10,consts:[["color","secondary"],["slot","start"],["slot","end"],[1,"padding"],["sizeLg","3","sizeMd","3","sizeXs","12"],["sizeLg","6","sizeMd","6","sizeXs","12",1,"bloc",2,"border","2px","border-width","2px","text-align","center"],[1,"ion-padding-horizontal","ion-text-center",2,"padding-top","5%","padding-bottom","5%"],[2,"color","rgb(0, 0, 0)"],["src","../assets/logo-anim.gif",2,"width","200px"],[1,"list-form",3,"formGroup"],["position","floating"],["name","mail-outline","item-start",""],["type","email","formControlName","email",3,"ngModel","ngModelChange"],["ion-text","","class","text08",4,"ngIf"],["name","lock-closed-outline","item-start",""],["type","password","formControlName","password",3,"ngModel","ngModelChange"],["ion-text","","color","warning","class","text08",4,"ngIf"],[1,"ion-margin-top","ion-text-right"],[3,"routerLink"],[2,"color","black"],["icon-left","","color","primary","expand","full","shape","round","tappable","",1,"bu",3,"disabled","click"],["icon-left","","color","secondary","expand","full","shape","round","tappable","",2,"display","none",3,"routerLink"],["ion-text","",1,"text08"],["color","dark"],["ion-text","","color","warning",1,"text08"]],template:function(r,o){1&r&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._uU(3," 1.1.2 admin "),e.qZA(),e._UZ(4,"ion-buttons",2),e.qZA()(),e.TgZ(5,"ion-content")(6,"ion-grid")(7,"ion-row",3),e._UZ(8,"ion-col",4),e.TgZ(9,"ion-col",5)(10,"div",6)(11,"h1",7),e._uU(12," Administration"),e.qZA()(),e._UZ(13,"img",8),e.TgZ(14,"form",9)(15,"ion-item")(16,"ion-label",10),e._UZ(17,"ion-icon",11),e._uU(18," Email "),e.qZA(),e.TgZ(19,"ion-input",12),e.NdJ("ngModelChange",function(c){return o.email=c}),e.qZA()(),e.YNc(20,w,3,0,"p",13),e.TgZ(21,"ion-item")(22,"ion-label",10),e._UZ(23,"ion-icon",14),e._uU(24," Mot de passe "),e.qZA(),e.TgZ(25,"ion-input",15),e.NdJ("ngModelChange",function(c){return o.password=c}),e.qZA()(),e.YNc(26,P,3,0,"p",16),e.qZA(),e.TgZ(27,"div",17)(28,"a",18)(29,"ion-text",19)(30,"strong"),e._uU(31," Mot de passe oubli\xe9 "),e.qZA()()()(),e.TgZ(32,"div")(33,"ion-button",20),e.NdJ("click",function(){return o.goLogin()}),e._uU(34," Connexion "),e.qZA()(),e.TgZ(35,"div")(36,"ion-button",21),e._uU(37," Inscription "),e.qZA()()(),e._UZ(38,"ion-col",4),e.qZA()()()),2&r&&(e.xp6(14),e.Q6J("formGroup",o.onLoginForm),e.xp6(5),e.Q6J("ngModel",o.email),e.xp6(1),e.Q6J("ngIf",o.onLoginForm.get("email")),e.xp6(5),e.Q6J("ngModel",o.password),e.xp6(1),e.Q6J("ngIf",o.onLoginForm.get("password")),e.xp6(2),e.Q6J("routerLink",e.DdM(8,O)),e.xp6(5),e.Q6J("disabled",!o.onLoginForm.valid),e.xp6(3),e.Q6J("routerLink",e.DdM(9,x)))},dependencies:[m.O5,a._Y,a.JJ,a.JL,a.sg,a.u,t.YG,t.Sm,t.wI,t.W2,t.jY,t.Gu,t.gu,t.pK,t.Ie,t.Q$,t.Nd,t.yW,t.sr,t.j9,t.YI,t.Fo,g.rH],styles:[".divider-blue[_ngcontent-%COMP%]{height:100px;border-radius:10px;background-color:#00bcd4;padding-top:20px;text-align:center}.bloc[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:5% 10%}ion-item[_ngcontent-%COMP%]{border-radius:10px;box-shadow:1px 1px 1px 2px #d7d7d7}.selectitem[_ngcontent-%COMP%]{--border-top-width: 6px;--border-end-width: 6px;--border-bottom-width: 6px;--border-start-width: 6px;--inner-border-width: 0;--border-width: var(--border-top-width) var(--border-end-width) var(--border-bottom-width) var(--border-start-width);--border-color: rgb(63, 187, 59)}ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .roundedInput[_ngcontent-%COMP%]{--border-color: gray;--border-radius: 5px;--border-width: 2px;--box-shadow: 2px gray;--highlight-height: 0;--background: #f8f9fa;padding-right:10px}ion-textarea.custom-textarea[_ngcontent-%COMP%]{--background: #373737;--color: #fff;--padding-end: 10px;--padding-start: 10px;--placeholder-color: #ddd;--placeholder-opacity: .8}.card-content-md[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 2px;font-weight:400;color:#000}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{height:100px}"]})});const C=[{path:"",component:b}];class s{}Object.defineProperty(s,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(r){return new(r||s)}}),Object.defineProperty(s,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:s})}),Object.defineProperty(s,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[g.Bz.forChild(C),g.Bz]})});class d{}Object.defineProperty(d,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(r){return new(r||d)}}),Object.defineProperty(d,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:d})}),Object.defineProperty(d,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[m.ez,a.u5,a.UX,t.Pc,s]})})}}]);